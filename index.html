<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Rechtsgrundlagen – Prüfungsquiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --bg-elevated: #020617;
      --card: #020617;
      --card-soft: #020617;
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.12);
      --accent-soft-strong: rgba(37, 99, 235, 0.25);
      --accent-border: rgba(37, 99, 235, 0.6);
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.4);
      --danger: #f97373;
      --danger-soft: rgba(248, 113, 113, 0.18);
      --success: #22c55e;
      --success-soft: rgba(34, 197, 94, 0.15);
      --muted: #6b7280;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.7);
      --shadow-subtle: 0 4px 18px rgba(15, 23, 42, 0.75);
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 48%, #000 100%);
      color: var(--text);
      min-height: 100vh;
    }

    body {
      display: flex;
      justify-content: center;
      padding: 24px;
    }

    .app {
      width: 100%;
      max-width: 1200px;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.17) 0, rgba(15, 23, 42, 0.95) 38%, #020617 70%);
      border-radius: 24px;
      padding: 22px 26px 26px;
      border: 1px solid rgba(30, 64, 175, 0.6);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .app::before {
      content: "";
      position: absolute;
      inset: -200px;
      background:
        radial-gradient(circle at 15% 0%, rgba(59, 130, 246, 0.18), transparent 60%),
        radial-gradient(circle at 85% 0%, rgba(56, 189, 248, 0.1), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    .app-header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .app-title {
      font-size: 24px;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title span {
      background: linear-gradient(120deg, #bfdbfe, #60a5fa, #a5b4fc);
      -webkit-background-clip: text;
      color: transparent;
    }

    .tag-pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .16em;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.6);
      color: #c7d2fe;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.45), rgba(15, 23, 42, 0.95));
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 780px;
    }

    .subtitle b {
      color: #e5e7eb;
      font-weight: 600;
    }

    .mode-info-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 2px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .mode-info-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.8));
    }

    .mode-info-row span strong {
      color: #e5e7eb;
      font-weight: 600;
    }

    .mode-info-row i {
      font-style: normal;
      opacity: 0.85;
    }

    .hidden {
      display: none !important;
    }

    .mode-select {
      margin: 12px 0 10px;
      padding: 14px 14px 16px;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.92));
      box-shadow: var(--shadow-subtle);
    }

    .mode-select-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .mode-select-title {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: #dbeafe;
    }

    .mode-select-subtitle {
      font-size: 12px;
      color: var(--text-soft);
    }

    .mode-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .mode-card {
      border-radius: 16px;
      border: 1px solid rgba(37, 99, 235, 0.28);
      padding: 10px 11px 12px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.96));
      color: inherit;
      cursor: pointer;
      text-align: left;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 86px;
      position: relative;
      overflow: hidden;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease, background 0.2s ease;
    }

    .mode-card::after {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.2), transparent 60%);
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .mode-card:hover {
      border-color: rgba(96, 165, 250, 0.9);
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.8);
      transform: translateY(-1px);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98));
    }

    .mode-card:hover::after {
      opacity: 1;
    }

    .mode-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .mode-card h3 {
      font-size: 14px;
      margin: 0;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .mode-tag {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(96, 165, 250, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #bfdbfe;
    }

    .mode-card p {
      font-size: 12px;
      color: var(--text-soft);
      margin: 4px 0 0;
    }

    .mode-stat {
      font-size: 11px;
      color: rgba(191, 219, 254, 0.9);
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 6px;
    }

    .mode-stat span {
      opacity: 0.85;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 260px) minmax(0, 1.5fr);
      gap: 16px;
      margin-top: 10px;
    }

    .info-column {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .mode-pill-current {
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(59, 130, 246, 0.6);
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.3), rgba(15, 23, 42, 0.98));
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      width: 100%;
      justify-content: space-between;
      color: #dbeafe;
    }

    .mode-pill-current span {
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .mode-pill-current strong {
      font-weight: 600;
    }

    .mode-pill-current small {
      color: rgba(191, 219, 254, 0.85);
      font-weight: 500;
    }

    .info-card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.96));
      padding: 10px 11px 11px;
      font-size: 12px;
      box-shadow: var(--shadow-subtle);
    }

    .info-card h3 {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #9ca3af;
      margin: 0 0 6px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }

    .info-item {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 6px 7px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.98));
    }

    .info-item-label {
      font-size: 11px;
      color: var(--text-soft);
    }

    .info-item-value {
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .hint-box {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
      padding: 7px 8px;
      border-radius: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
    }

    .hint-box b {
      color: #dbeafe;
    }

    .score-banner {
      margin-top: 4px;
      padding: 8px 9px;
      border-radius: 14px;
      border: 1px solid rgba(37, 99, 235, 0.7);
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.25), rgba(15, 23, 42, 0.98));
      font-size: 12px;
      color: #dbeafe;
    }

    .score-main {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 3px;
    }

    .score-percent {
      font-size: 20px;
      font-weight: 700;
    }

    .score-grade {
      font-size: 13px;
      font-weight: 600;
    }

    .score-details {
      font-size: 11px;
      color: rgba(191, 219, 254, 0.9);
    }

    .question-column {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .question-card {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.98));
      padding: 12px 14px 13px;
      box-shadow: var(--shadow-subtle);
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 6px;
    }

    .question-number {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #9ca3af;
    }

    .question-topic {
      font-size: 11px;
      color: var(--text-soft);
      text-align: right;
    }

    .question-text {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .question-context {
      font-size: 11px;
      color: var(--text-soft);
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 1));
      padding: 7px 8px;
      margin-bottom: 6px;
      max-height: 210px;
      overflow: auto;
      white-space: pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .question-note {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 6px;
    }

    .option {
      position: relative;
      display: flex;
      align-items: flex-start;
      gap: 7px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 1));
      cursor: pointer;
      font-size: 13px;
      transition: border-color 0.15s ease, background 0.15s ease, transform 0.06s ease;
    }

    .option:hover {
      border-color: rgba(96, 165, 250, 0.9);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 1));
      transform: translateY(-0.5px);
    }

    .option input[type="checkbox"] {
      margin-top: 2px;
      accent-color: var(--accent);
      width: 15px;
      height: 15px;
      flex-shrink: 0;
      cursor: pointer;
    }

    .option-letter {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin-top: 1px;
      flex-shrink: 0;
      width: 22px;
    }

    .option-text {
      flex: 1;
    }

    .option.correct {
      border-color: rgba(34, 197, 94, 0.9);
      background: radial-gradient(circle at 0 0, rgba(22, 163, 74, 0.25), rgba(15, 23, 42, 0.98));
    }

    .option.incorrect {
      border-color: rgba(248, 113, 113, 0.95);
      background: radial-gradient(circle at 0 0, rgba(248, 113, 113, 0.22), rgba(15, 23, 42, 0.98));
    }

    .option.unselected-correct {
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.7) inset;
    }

    .explanation {
      font-size: 11px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 1));
      color: var(--text-soft);
      margin-top: 4px;
    }

    .explanation strong {
      color: #e5e7eb;
    }

    .message {
      font-size: 11px;
      margin-top: 3px;
      color: #fde68a;
    }

    .nav-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 4px;
    }

    .nav-row.second {
      justify-content: flex-end;
      margin-top: 3px;
    }

    button {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      font-size: 12px;
      padding: 7px 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 1));
      color: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.8);
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease,
        border-color 0.15s ease;
    }

    button:hover {
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.25), rgba(15, 23, 42, 0.98));
      border-color: rgba(96, 165, 250, 0.9);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.9);
      transform: translateY(-0.5px);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.9);
    }

    button.primary {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      border-color: rgba(59, 130, 246, 0.95);
      color: #eff6ff;
      box-shadow: 0 14px 30px rgba(37, 99, 235, 0.7);
    }

    button.primary:hover {
      background: linear-gradient(135deg, #1d4ed8, #4338ca);
    }

    button:disabled {
      opacity: 0.4;
      cursor: default;
      transform: none;
      box-shadow: none;
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98));
    }

    .app-footer {
      margin-top: 14px;
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .app-footer b {
      color: #e5e7eb;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .info-column {
        order: -1;
      }
    }

    @media (max-width: 720px) {
      body {
        padding: 12px;
      }
      .app {
        padding: 16px 14px 18px;
        border-radius: 20px;
      }
      .app-title {
        font-size: 20px;
      }
      .mode-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="title-row">
        <div class="app-title">
          <span>Rechtsgrundlagen – Prüfungsquiz</span>
        </div>
        <div class="tag-pill">Öffentliches Recht · Privatrecht · Grundbuch</div>
      </div>
      <p class="subtitle">
        Training für deine Prüfung: <b>Mehrfachauswahl wie im echten Test</b>
        (nie „gar keine Antwort“ und nie „alle richtig“).
        Jeder Frageblock gehört zu den Handouts (Öffentliches Recht, Privatrecht,
        Gewährleistung/Schadenersatz/Produkthaftung, BauO, Grundbuch usw.).
      </p>
      <div class="mode-info-row">
        <span><strong>Hinweis:</strong> <i>Es können eine oder mehrere Antworten richtig sein.</i></span>
        <span><strong>Tipp:</strong> <i>Immer alle richtigen ankreuzen, keine extra falsche.</i></span>
      </div>
    </header>

    <section id="mode-select" class="mode-select">
      <div class="mode-select-header">
        <div>
          <div class="mode-select-title">Spielmodus wählen</div>
          <div class="mode-select-subtitle">
            Starte entweder mit dem großen Gesamt-Quiz oder trainiere gezielt das Lesen von Grundbuchauszügen.
          </div>
        </div>
      </div>
      <div class="mode-grid">
        <button class="mode-card" data-mode="all">
          <div class="mode-card-header">
            <h3>Gesamt-Quiz: Öffentliches &amp; Privatrecht</h3>
            <span class="mode-tag">Modus A</span>
          </div>
          <p>
            Alle Themen gemischt (Verfassungsrecht, Verwaltung, BauO, Privatrecht,
            Verträge, Gewährleistung/SE/Produkthaftung, Sachenrecht, Grundbuch-Basics …).
          </p>
          <div class="mode-stat">
            <span>≈ 60 Fragen · Niveau wie Prüfung</span>
          </div>
        </button>

        <button class="mode-card" data-mode="grundbuch">
          <div class="mode-card-header">
            <h3>Spezial-Modus: Grundbuchauszüge</h3>
            <span class="mode-tag">Modus B</span>
          </div>
          <p>
            Mehrere fiktive Grundbuchauszüge für Wien – mit Fragen zu A-, B-, C-Blatt,
            Pfandrechten, Dienstbarkeiten, Plombe usw.
          </p>
          <div class="mode-stat">
            <span>12 Lernfragen mit Fällen</span>
          </div>
        </button>
      </div>
    </section>

    <main id="quiz-main" class="hidden">
      <div class="layout">
        <section class="info-column">
          <div class="mode-pill-current">
            <span>
              <strong>Aktiver Modus</strong>
            </span>
            <small id="current-mode-label">–</small>
          </div>

          <div id="progress-info" class="info-card">
            <h3>Fortschritt</h3>
            <div class="info-grid">
              <div class="info-item">
                <div class="info-item-label">Frage</div>
                <div class="info-item-value" id="info-current-question">–</div>
              </div>
              <div class="info-item">
                <div class="info-item-label">Insgesamt</div>
                <div class="info-item-value" id="info-total-questions">–</div>
              </div>
              <div class="info-item">
                <div class="info-item-label">Schon geprüft</div>
                <div class="info-item-value" id="info-checked">–</div>
              </div>
              <div class="info-item">
                <div class="info-item-label">Davon richtig</div>
                <div class="info-item-value" id="info-correct">–</div>
              </div>
            </div>
            <div class="hint-box">
              <b>Merke:</b> Punkte gibt es nur, wenn du
              <b>alle richtigen</b> und <b>keine falsche</b> Antwort ankreuzt –
              ganz wie in der echten Prüfung.
            </div>
          </div>

          <div id="score-banner" class="score-banner hidden">
            <div class="score-main">
              <span class="score-percent" id="score-percent">0%</span>
              <span class="score-grade" id="score-grade">Note –</span>
            </div>
            <div class="score-details" id="score-details">
              Noch keine Auswertung durchgeführt.
            </div>
          </div>
        </section>

        <section class="question-column">
          <div id="question-container"></div>

          <div class="nav-row">
            <button id="prev-btn" type="button">◀ Zurück</button>
            <button id="check-btn" type="button">Antwort prüfen</button>
            <button id="next-btn" type="button">Weiter ▶</button>
          </div>
          <div class="nav-row second">
            <button id="eval-btn" type="button" class="primary">
              Gesamtes Quiz auswerten
            </button>
          </div>
        </section>
      </div>
    </main>

    <footer class="app-footer">
      <span>
        <b>Lerntipp:</b> Wenn du eine Frage falsch hast, markiere dir das Thema im Handout
        und lies den Abschnitt kurz nach – dann wiederhole den Modus.
      </span>
      <span>Du kannst die Fragen-Arrays im Code jederzeit erweitern oder anpassen.</span>
    </footer>
  </div>

  <script>
    // =========================
    // FRAGENKATALOG – GESAMT
    // =========================

    const ALL_QUESTIONS = [
      // --- 1. Grundlagen: Öffentliches Recht / Privatrecht / Stufenbau ---
      {
        id: 1,
        topic: "Rechtsgebiete – Grundlagen",
        text: `Welche Aussagen zum Privatrecht sind zutreffend?`,
        options: [
          `Privatrecht regelt Rechtsbeziehungen, bei denen sich die Beteiligten gleichberechtigt gegenüberstehen.`,
          `Für die Rechtsdurchsetzung im Privatrecht sind Zivilgerichte zuständig.`,
          `Privatrecht regelt die Ausübung hoheitlicher Macht durch den Staat.`,
          `Privatrecht regelt die Zuständigkeit und Tätigkeit von Bundes- und Landesbehörden.`
        ],
        correctIndices: [0, 1],
        explanation: `Privatrecht (=Zivilrecht) betrifft gleichberechtigte Rechtsbeziehungen zwischen Privaten; zuständig sind die ordentlichen Zivilgerichte. Hoheitliche Machtausübung und Behördenzuständigkeit gehören zum öffentlichen Recht.`
      },
      {
        id: 2,
        topic: "Rechtsgebiete – Grundlagen",
        text: `Welche Aussagen zum Öffentlichen Recht sind richtig?`,
        options: [
          `Öffentliches Recht regelt u.a. die Tätigkeit von mit Hoheitsgewalt ausgestatteten Rechtsträgern (z.B. Bund, Länder).`,
          `Öffentliches Recht regelt Rechtsbeziehungen, bei denen sich die Beteiligten gleichberechtigt gegenüberstehen.`,
          `Zum öffentlichen Recht zählen z.B. Verfassungsrecht und Verwaltungsrecht.`,
          `Im öffentlichen Recht geht es niemals um hoheitliche Macht, sondern nur um Privatautonomie.`
        ],
        correctIndices: [0, 2],
        explanation: `Öffentliches Recht betrifft die Ausübung hoheitlicher Macht und die Tätigkeit von Bund, Ländern, Gemeinden usw. Verfassungsrecht und Verwaltungsrecht sind typische Teilgebiete. Gleichberechtigte Beziehungen sind Kennzeichen des Privatrechts.`
      },
      {
        id: 3,
        topic: "Rechtsquellen – Zwingendes / dispositives Recht",
        text: `Welche Aussagen zu zwingendem und dispositivem Recht treffen zu?`,
        options: [
          `Absolut zwingendes Recht kann durch Parteienvereinbarung überhaupt nicht abgeändert werden.`,
          `Relativ zwingendes Recht kann nur zugunsten eines bestimmten Vertragspartners abgeändert werden.`,
          `Dispositives Recht kann durch vertragliche Vereinbarung geändert werden, solange keine zwingenden Normen verletzt werden.`,
          `Dispositives Recht wird auch absolut zwingendes Recht genannt.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Absolut zwingendes Recht (z.B. BauO) ist gar nicht veränderbar. Relativ zwingendes Recht darf nur zugunsten eines Vertragspartners abgeändert werden (z.B. Konsumentenschutz). Dispositives Recht ist „nachgiebig“ und kann vertraglich übergangen werden.`
      },
      {
        id: 4,
        topic: "Stufenbau der Rechtsordnung",
        text: `Welche Aussagen zum Stufenbau der Rechtsordnung sind richtig?`,
        options: [
          `Verordnungen sind Normen mit genereller Rechtskraft und müssen dem Gesetz entsprechen.`,
          `Nationale Verordnungen und EU-Verordnungen sind im Stufenbau der Rechtsordnung immer gleichrangig.`,
          `Das EU-Recht hat Anwendungsvorrang, steht aber nicht einfach „über“ der österreichischen Verfassung.`,
          `Eine generelle rangniedrigere Norm kann nur zustande kommen, wenn dies in einer höherrangigen Norm vorgesehen ist und darf nicht im Widerspruch zu ihr stehen.`
        ],
        correctIndices: [0, 3],
        explanation: `Verordnungen sind generelle Normen und müssen auf ein Gesetz gestützt sein. Rangniedrigere Normen dürfen nur aufgrund einer höheren Norm entstehen und dürfen ihr nicht widersprechen. Das Verhältnis EU-Recht/Verfassungsrecht ist komplexer; EU-Recht hat Anwendungsvorrang, steht aber nicht einfach „über“ den Verfassungsgrundsätzen.`
      },
      {
        id: 5,
        topic: "Verfassungsprinzipien",
        text: `Das demokratische Prinzip im engeren Sinn besagt unter anderem, dass…`,
        options: [
          `alle Staatsbürger an der Staatswillensbildung beteiligt sind und damit Träger der Staatsgewalt (Souveränität) sind.`,
          `Österreich in Bundesländer mit eigenen Kompetenzen und Mitbestimmungsrechten aufgeteilt ist.`,
          `Österreich ein gewähltes Staatsoberhaupt hat und daher eine Republik ist.`,
          `die Staatsbürger gegenüber dem Staat Grund- und Freiheitsrechte haben.`
        ],
        correctIndices: [0],
        explanation: `Kern des demokratischen Prinzips ist, dass alle Staatsbürger über Wahlen und Volksabstimmungen an der Staatswillensbildung teilnehmen und Träger der Staatsgewalt sind. Bundesstaatlichkeit, Republikanisches und Rechtsstaatliches Prinzip sind eigene Verfassungsgrundsätze.`
      },
      {
        id: 6,
        topic: "Verfassungsprinzipien / Gewaltenteilung",
        text: `Welche Aussagen zum gewaltentrennenden Prinzip sind zutreffend?`,
        options: [
          `Es regelt die Trennung von Gesetzgebung, Verwaltung und Gerichtsbarkeit, um Machtkonzentration zu verhindern.`,
          `Es wird auch Föderalismus genannt.`,
          `Es bedeutet, dass die Staatsfunktionen grundsätzlich von verschiedenen, voneinander unabhängigen Organen ausgeübt werden.`,
          `Es beinhaltet in erster Linie die Grund- und Freiheitsrechte.`
        ],
        correctIndices: [0, 2],
        explanation: `Das gewaltentrennende Prinzip trennt Gesetzgebung, Vollziehung/Verwaltung und Gerichtsbarkeit. Diese Funktionen werden von unterschiedlichen Organen wahrgenommen. Föderalismus betrifft den Bundesstaatsaufbau; Grund- und Freiheitsrechte gehören eher zum rechtsstaatlichen/liberalen Prinzip.`
      },
      {
        id: 7,
        topic: "Bundesgesetzgebung",
        text: `Welche Aussagen zur Bundesgesetzgebung in Österreich sind richtig?`,
        options: [
          `Der Nationalrat beschließt Bundesgesetze; der Bundesrat wirkt u.a. bei manchen Gesetzen mit.`,
          `Der Bundespräsident beurkundet (unterzeichnet) Bundesgesetze, bevor sie kundgemacht werden.`,
          `Eine Gesetzgebungsperiode des Nationalrats dauert grundsätzlich 5 Jahre.`,
          `Die Bundesregierung kann einfache Gesetze ohne Nationalrat beschließen, wenn sie einstimmig ist.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Bundesgesetze werden vom Nationalrat beschlossen, der Bundesrat wirkt mit (insb. suspensives Veto). Der Bundespräsident beurkundet Gesetze. Die Gesetzgebungsperiode dauert in der Regel 5 Jahre. Die Bundesregierung kann Gesetze nicht ohne Parlament beschließen.`
      },
      {
        id: 8,
        topic: "Staatsorgane",
        text: `Welche Aussagen zu den österreichischen Höchstgerichten sind korrekt?`,
        options: [
          `Der Verfassungsgerichtshof überprüft u.a. Gesetze und Verordnungen auf ihre Verfassungsmäßigkeit.`,
          `Der Verwaltungsgerichtshof kontrolliert die Rechtmäßigkeit von Entscheidungen der Verwaltungsgerichte.`,
          `Der Oberste Gerichtshof ist höchstes Gericht in Zivil- und Strafsachen.`,
          `Der EuGH kontrolliert die österreichische Bundesverfassung und hebt verfassungswidrige Gesetze auf.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `VfGH: Verfassungsmäßigkeit von Gesetzen/Verordnungen, Grundrechtskontrolle usw. VwGH: Kontrolle von Entscheidungen der Verwaltungsgerichte. OGH: Höchstgericht in Zivil- und Strafsachen. Der EuGH ist für Auslegung und Anwendung des EU-Rechts zuständig, nicht für direkte Aufhebung österreichischer Verfassungsbestimmungen.`
      },
      {
        id: 9,
        topic: "Rechtsquellen – generelle und individuelle Normen",
        text: `Welche Beispiele sind generelle Normen mit Außenwirkung?`,
        options: [
          `Eine Verordnung einer Bezirksverwaltungsbehörde.`,
          `Ein Urteil eines Bezirksgerichts in einem Zivilverfahren.`,
          `Ein Bescheid einer Baubehörde in einem konkreten Bauverfahren.`,
          `Ein Bundesgesetz, das im BGBl. kundgemacht wurde.`
        ],
        correctIndices: [0, 3],
        explanation: `Bundesgesetze und Verordnungen sind generelle Normen. Urteile und Bescheide sind individuelle Entscheidungen in Einzelfällen.`
      },
      {
        id: 10,
        topic: "Justiz / ordentliche Gerichtsbarkeit",
        text: `Welche Aussagen zur ordentlichen Gerichtsbarkeit treffen zu?`,
        options: [
          `Ordentliche Gerichte sind zuständig für Zivil- und Strafsachen, soweit nicht Verwaltungsbehörden zuständig sind.`,
          `Gerichtsverfahren sind grundsätzlich mündlich und öffentlich (mit gesetzlichen Ausnahmen).`,
          `Es gibt eine fixe Geschäftsaufteilung bei Gerichten, welche bestimmt, welcher Richter zuständig ist.`,
          `Ordentliche Gerichte vollziehen ausschließlich Verwaltungsrecht.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Ordentliche Gerichte (BG, LG, OLG, OGH) sind für Zivil- und Strafsachen zuständig. Verfahren sind grundsätzlich mündlich und öffentlich. Die Geschäftsverteilung regelt, welcher Spruchkörper zuständig ist. Verwaltungsrecht wird von Verwaltungsbehörden und Verwaltungsgerichten vollzogen.`
      },

      // --- 2. Verwaltung / Verwaltungsverfahren / Verwaltungsstrafrecht ---
      {
        id: 11,
        topic: "Verwaltung – Begriff",
        text: `Welche Aussagen zur Verwaltung im Sinn der Gewaltentrennung sind richtig?`,
        options: [
          `Verwaltung ist alle staatliche Vollziehungstätigkeit, die nicht Gesetzgebung oder Gerichtsbarkeit ist.`,
          `Verwaltung ist die Summe allen staatlichen Handelns von unabhängigen Richtern.`,
          `Verwaltung ist die Summe der Vollziehungstätigkeiten, die von Verwaltungsbehörden ausgeübt werden.`,
          `Verwaltungstätigkeit kann sowohl hoheitlich als auch privatwirtschaftlich erfolgen.`
        ],
        correctIndices: [0, 2, 3],
        explanation: `Verwaltung umfasst die Vollziehung durch Verwaltungsbehörden (hoheitlich und privatwirtschaftlich). Gesetzgebung und Gerichtsbarkeit sind eigene Gewalten.`
      },
      {
        id: 12,
        topic: "Hoheitsverwaltung – Handlungsformen",
        text: `Welche Handlungsformen gehören zur Hoheitsverwaltung?`,
        options: [
          `Verordnung einer Verwaltungsbehörde.`,
          `Bescheid einer Verwaltungsbehörde.`,
          `Urteil eines Zivilgerichts.`,
          `Verwaltungsvertrag (z.B. zwischen Behörde und Privatem).`
        ],
        correctIndices: [0, 1],
        explanation: `Hoheitsakte der Verwaltung sind vor allem Verordnungen (generell) und Bescheide (individuell). Urteile stammen von Gerichten. Verträge sind privatrechtliches Handeln (Privatwirtschaftsverwaltung).`
      },
      {
        id: 13,
        topic: "Bescheid",
        text: `Welche Wesensmerkmale eines Bescheides sind zutreffend?`,
        options: [
          `Er richtet sich an einen bestimmten individuellen Adressatenkreis.`,
          `Er ist ein hoheitlicher Akt einer Verwaltungsbehörde.`,
          `Er entfaltet seine Rechtswirksamkeit grundsätzlich durch Zustellung bzw. Verkündung.`,
          `Er ist immer eine generelle Norm mit unbestimmtem Adressatenkreis.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Bescheide sind individuelle, hoheitliche Entscheidungen in Einzelfällen. Sie werden wirksam durch ordnungsgemäße Zustellung/Verkündung. Generelle Normen mit unbestimmtem Adressatenkreis sind Gesetze/Verordnungen.`
      },
      {
        id: 14,
        topic: "Parteistellung",
        text: `Mit der Parteistellung im Verwaltungsverfahren sind welche Rechte verbunden?`,
        options: [
          `Recht auf Akteneinsicht.`,
          `Recht, ordentliche und außerordentliche Rechtsmittel zu erheben.`,
          `Rechtsanspruch auf Geltendmachung der Entscheidungspflicht der Behörde.`,
          `Nur mündliche Verkündung, aber keine Zustellung des Bescheids.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Parteistellung umfasst u.a. Akteneinsicht, Parteiengehör, Rechtsmittelrecht sowie die Möglichkeit, die Entscheidungspflicht geltend zu machen. Bloße Verkündung ohne Zustellung wäre nicht ausreichend.`
      },
      {
        id: 15,
        topic: "Verwaltungsverfahrensrecht – Rechtsquellen",
        text: `Welche Rechtsquellen gehören insbesondere zum Verwaltungsverfahrensrecht?`,
        options: [
          `Allgemeines Verwaltungsverfahrensgesetz (AVG).`,
          `Zustellgesetz (ZustG).`,
          `Verwaltungsstrafgesetz (VStG).`,
          `Strafprozessordnung (StPO).`
        ],
        correctIndices: [0, 1, 2],
        explanation: `AVG, ZustG und VStG regeln das Verwaltungsverfahren und Verwaltungsstrafverfahren. Die Strafprozessordnung gilt für das gerichtliche Strafverfahren, nicht für Verwaltungsverfahren.`
      },
      {
        id: 16,
        topic: "Zustellung",
        text: `Welche Aussagen zur Zustellung von behördlichen Schriftstücken treffen zu?`,
        options: [
          `RSa bedeutet, dass das Schriftstück nur dem Empfänger selbst zugestellt werden darf.`,
          `RSb erlaubt die Übergabe auch an andere Empfangsberechtigte im Haushalt.`,
          `Zustellung durch Hinterlegung gilt mit dem ersten Tag der Abholfrist als zugestellt (nach vorherigem Zustellversuch).`,
          `Die Rechtsmittelfrist ist gewahrt, wenn das Schriftstück am ersten Tag nach Fristablauf zur Post gegeben wird.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `RSa = nur an den Empfänger; RSb = auch an Mitbewohner. Bei Hinterlegung gilt das Schriftstück mit dem ersten Tag der Abholfrist als zugestellt. Für Fristen ist die Aufgabe bei der Post spätestens am letzten Tag der Frist entscheidend.`
      },
      {
        id: 17,
        topic: "Rechtsmittel – Beschwerde / Beschwerdevorentscheidung",
        text: `Welche Aussagen zur Beschwerde gegen einen Bescheid sind richtig?`,
        options: [
          `Die Beschwerde ist grundsätzlich binnen vier Wochen ab Zustellung des Bescheids einzubringen.`,
          `Die Beschwerde ist bei der bescheiderlassenden Behörde einzubringen.`,
          `Die Behörde kann eine Beschwerdevorentscheidung erlassen und den Bescheid aufheben, abändern oder die Beschwerde abweisen.`,
          `Gegen eine Beschwerdevorentscheidung gibt es keine weitere Möglichkeit, das Verwaltungsgericht anzurufen.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Die Bescheidbeschwerde ist binnen vier Wochen bei der Ausgangsbehörde einzubringen. Diese kann eine Beschwerdevorentscheidung treffen. Gegen diese ist ein Vorlageantrag an das Verwaltungsgericht möglich.`
      },
      {
        id: 18,
        topic: "Außerordentliche Rechtsmittel",
        text: `Welche außerordentlichen Rechtsmittel im Verwaltungsverfahren gibt es u.a.?`,
        options: [
          `Wiederaufnahme des Verfahrens.`,
          `Wiedereinsetzung in den vorigen Stand.`,
          `Geltendmachung der Entscheidungspflicht (Säumnisbeschwerde).`,
          `Berufung an den Gemeinderat.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Außerordentliche Rechtsmittel sind z.B. Wiederaufnahme (neue Tatsachen/Beweismittel), Wiedereinsetzung (unverschuldete Fristversäumnis) und Säumnisbeschwerde/Entscheidungspflicht. Eine Berufung an den Gemeinderat ist kein solches Rechtsmittel.`
      },
      {
        id: 19,
        topic: "Verwaltungsstrafrecht",
        text: `Welche Aussagen zu den Rechtsquellen des Verwaltungsstrafrechts sind korrekt?`,
        options: [
          `Verwaltungsstrafbestimmungen und Strafausmaß stehen im Strafgesetzbuch (StGB).`,
          `Verwaltungsstrafbestimmungen und Strafausmaß finden sich in den jeweiligen Materiengesetzen (z.B. BauO, GewerbeO).`,
          `Das Verwaltungsstrafgesetz (VStG) regelt den Ablauf des Verwaltungsstrafverfahrens.`,
          `Der Ablauf des Verwaltungsstrafverfahrens ist ausschließlich in der Strafprozessordnung geregelt.`
        ],
        correctIndices: [1, 2],
        explanation: `Die einzelnen Tatbestände und Strafdrohungen stehen in den Materiengesetzen (z.B. BauO). Das VStG regelt das Verfahren. Das StGB und die StPO betreffen das gerichtliche Strafrecht.`
      },
      {
        id: 20,
        topic: "Fahrlässigkeit / Verwaltungsstrafrecht",
        text: `Welche Aussage zur Fahrlässigkeit ist NICHT zutreffend?`,
        options: [
          `Fahrlässig handelt, wer die Sorgfalt außer Acht lässt, zu der er nach den Umständen verpflichtet ist.`,
          `Fahrlässig handelt, wer geistig und körperlich zur Sorgfaltswahrung fähig ist, diese aber trotzdem verletzt.`,
          `Fahrlässigkeit liegt auch vor, wenn jemand trotz Unzurechnungsfähigkeit handelt.`,
          `Die zu erwartende Sorgfalt richtet sich auch danach, was einem Täter zugemutet werden kann.`
        ],
        correctIndices: [2],
        explanation: `Unzurechnungsfähige Personen sind strafrechtlich grundsätzlich nicht verantwortlich. Fahrlässigkeit setzt Zurechnungsfähigkeit voraus.`
      },

      // --- 3. Bau- und Raumordnungsrecht / Gewerberecht ---
      {
        id: 21,
        topic: "Raumordnung / Flächenwidmungsplan",
        text: `Welche Aussagen zum Flächenwidmungsplan sind richtig?`,
        options: [
          `Er ist grundsätzlich eine Verordnung der Gemeinde und teilt das Gemeindegebiet in Bauland, Grünland usw. ein.`,
          `Er wird als Bescheid von der Baubehörde erlassen.`,
          `Er unterliegt der Aufsicht der jeweiligen Landesregierung.`,
          `Er ist für Baubewilligungen relevant, weil die Liegenschaft in der Regel als Bauland gewidmet sein muss.`
        ],
        correctIndices: [0, 2, 3],
        explanation: `Der Flächenwidmungsplan ist eine Verordnung (Gemeinde), steht unter Aufsicht des Landes und ist zentrale Grundlage für Baubewilligungen (Baulandwidmung).`
      },
      {
        id: 22,
        topic: "Raumordnungs-/Bauverfahren – Kumulationsprinzip",
        text: `Welche Aussagen zum Kumulationsprinzip treffen zu?`,
        options: [
          `Alle für ein Projekt relevanten Gesetze werden in einem einzigen Verfahren samt einem „konzentrierten“ Bescheid erledigt.`,
          `Kumulationsprinzip bedeutet, dass ggf. mehrere Bewilligungen nach verschiedenen Gesetzen erforderlich sind.`,
          `Konzentrationsprinzip ist ein anderer Begriff für Kumulationsprinzip.`,
          `Bei kumulativer Zuständigkeit können parallel mehrere Bewilligungsverfahren laufen.`
        ],
        correctIndices: [1, 4 - 1], // indexes 1 & 3
        explanation: `Beim Kumulationsprinzip sind für ein Projekt oft mehrere gesonderte Bewilligungen (z.B. Bau-, Gewerbe-, Naturschutzrecht) nötig. Das Konzentrationsprinzip fasst demgegenüber mehrere Materien in einem Verfahren/Bescheid zusammen.`
      },
      {
        id: 23,
        topic: "Wiener Bauordnung – Zuständigkeit",
        text: `Welche Aussagen zur Baubehörde in Wien sind richtig?`,
        options: [
          `In Wien ist grundsätzlich die MA 37 (Baupolizei) Baubehörde.`,
          `Über Berufungen gegen Bescheide der MA 37 entscheidet das Landesverwaltungsgericht Wien.`,
          `Für Bauangelegenheiten ist in ganz Österreich immer das Landesverwaltungsgericht erster Instanz zuständig.`,
          `Für Bauangelegenheiten sind grundsätzlich Gemeinden/Magistrate zuständig.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Baubehörde ist in Wien die MA 37. Rechtsmittelinstanz ist das Landesverwaltungsgericht. In erster Instanz sind Gemeinden/Magistrate tätig, nicht die Verwaltungsgerichte.`
      },
      {
        id: 24,
        topic: "Wiener Bauordnung – vereinfachtes Bauverfahren",
        text: `Wann kommt das vereinfachte Bauverfahren nach Wiener Bauordnung zur Anwendung?`,
        options: [
          `Bei Gebäuden mit höchstens drei oberirdischen Geschoßen und einem umbauten Raum von nicht mehr als 4.000 m³.`,
          `Bei jedem Bauvorhaben im Grünland.`,
          `Immer bei Einfamilienhäusern, unabhängig von Größe und Geschoßanzahl.`,
          `Bei Bauvorhaben mit mehr als 10.000 m³ umbautem Raum.`
        ],
        correctIndices: [0],
        explanation: `Die Wiener Bauordnung sieht ein vereinfachtes Verfahren für relativ kleine Bauwerke (bis 3 Geschoße und 4.000 m³) vor.`
      },
      {
        id: 25,
        topic: "Wiener Bauordnung – subjektive Nachbarrechte",
        text: `Was regelt § 70 der Wiener Bauordnung (stark verkürzt)?`,
        options: [
          `Subjektive Nachbarrechte im Bauverfahren.`,
          `Die Strafsätze für Verwaltungsübertretungen nach der Bauordnung.`,
          `Die Zuständigkeit der MA 37.`,
          `Die Pflichten des Bauwerbers gegenüber dem Bauarbeiter.`
        ],
        correctIndices: [0],
        explanation: `§ 70 Wr. BauO regelt im Kern die subjektiven Nachbarrechte im Bauverfahren (z.B. Möglichkeiten von Nachbarn, Einwendungen zu erheben).`
      },
      {
        id: 26,
        topic: "Wiener Bauordnung – Strafdrohung",
        text: `Welche Aussagen zu Verwaltungsstrafen nach der Wiener Bauordnung treffen zu? (vereinfacht)`,
        options: [
          `Es gibt Geldstrafen, die in bestimmten Fällen bis über 20.000 EUR reichen können.`,
          `Zusätzlich kann in besonderen Fällen auch eine kurze Ersatzfreiheitsstrafe vorgesehen sein.`,
          `Die Bauordnung kennt nur Verwarnungen, aber keine Geldstrafen.`,
          `Die Höhe von Verwaltungsstrafen ist bundesweit im StGB geregelt.`
        ],
        correctIndices: [0, 1],
        explanation: `Die Bauordnung sieht durchaus hohe Geldstrafen und in Ausnahmefällen Ersatzfreiheitsstrafen vor. Die Strafdrohungen stehen im jeweiligen Landesgesetz, nicht im StGB.`
      },
      {
        id: 27,
        topic: "Gewerberecht – Gewerbeberechtigung",
        text: `Wann ist für eine selbständige Tätigkeit grundsätzlich eine Gewerbeberechtigung nach der Gewerbeordnung erforderlich?`,
        options: [
          `Bei der Ausübung eines freien Gewerbes.`,
          `Bei der Ausübung eines reglementierten Gewerbes.`,
          `Nie, wenn keine Betriebsanlagengenehmigung erforderlich ist.`,
          `Nicht, wenn die Tätigkeit ausdrücklich von der Gewerbeordnung ausgenommen ist.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Sowohl freie als auch reglementierte Gewerbe sind gewerberechtlich melde- oder bewilligungspflichtig. Ausgenommene Tätigkeiten unterliegen nicht der GewO. Eine Betriebsanlagengenehmigung ist eine eigene Frage.`
      },

      // --- 4. Privatrecht – Quellen / Grundbegriffe / Verträge / AGB / KV / Sicherheiten ---
      {
        id: 28,
        topic: "Privatrechtsquellen",
        text: `Welche Aussagen zu den Privatrechtsquellen sind richtig?`,
        options: [
          `Das ABGB ist das grundlegende Gesetz des österreichischen Privatrechts.`,
          `Sonderprivatrechtsgesetze (z.B. Mietrecht, Konsumentenschutzrecht) gehen als speziellere Normen dem ABGB teilweise vor.`,
          `Sonderprivatrechtsgesetze dürfen keine anderen Regelungen enthalten als das ABGB.`,
          `Das ABGB gilt subsidiär, wenn kein spezielleres Privatrechtsgesetz eingreift.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Das ABGB ist das „Grundgesetz“ des Privatrechts. Spezielle Gesetze (Mietrechtsgesetz, KSchG etc.) gehen als lex specialis vor; das ABGB gilt subsidiär. Dass Sondergesetze „nichts anderes regeln dürfen“ ist falsch.`
      },
      {
        id: 29,
        topic: "Sachenrecht – Grundsätze",
        text: `Welche Grundsätze des Sachenrechts sind zutreffend?`,
        options: [
          `Publizität (Rechte sollen nach außen erkennbar sein).`,
          `Typenzwang (nur gesetzlich vorgesehene Sachenrechte).`,
          `Spezialität (Sachenrecht bezieht sich auf bestimmte, individualisierte Sachen).`,
          `Beliebigkeitsprinzip (beliebige neue Sachenrechte können vertraglich geschaffen werden).`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Sachenrechte sind absolut; sie unterliegen Publizität, Typenzwang und Spezialität. Ein „Beliebigkeitsprinzip“ gibt es nicht.`
      },
      {
        id: 30,
        topic: "Geschäftsfähigkeit",
        text: `Geschäftsfähigkeit: Welche Aussagen zu einer 16-jährigen Person sind richtig (vereinfacht)?`,
        options: [
          `Sie kann über ihr eigenes Einkommen rechtsgeschäftlich verfügen, solange dadurch die eigenen Lebensbedürfnisse nicht gefährdet werden.`,
          `Sie ist voll geschäftsfähig, weil sie auch wahlberechtigt ist.`,
          `Sie darf alterstypische Geschäfte abschließen und Schenkungen ohne Bedingungen annehmen (wenn sie nur berechtigen).`,
          `Sie kann überhaupt keine Rechtsgeschäfte wirksam abschließen.`
        ],
        correctIndices: [0, 2],
        explanation: `Jugendliche sind beschränkt geschäftsfähig: Sie können über eigenes Einkommen verfügen, solange sie ihre Lebensbedürfnisse nicht gefährden, und bestimmte alterstypische Geschäfte eingehen. Voll geschäftsfähig sind sie noch nicht.`
      },
      {
        id: 31,
        topic: "Vertragsabschluss – Voraussetzungen",
        text: `Welche Voraussetzungen sind für einen gültigen Vertrag (im Normalfall) erforderlich?`,
        options: [
          `Übereinstimmende Willenserklärungen (Anbot und Annahme).`,
          `Geschäftsfähigkeit der Vertragspartner.`,
          `Schriftlichkeit – sonst ist ein Vertrag niemals wirksam.`,
          `Kein Verstoß gegen zwingendes Recht oder die guten Sitten.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Wesentlich sind übereinstimmende Willenserklärungen, ausreichende Geschäftsfähigkeit und die Zulässigkeit des Inhalts. Schriftlichkeit ist nur bei bestimmten Geschäften (z.B. Liegenschaftskauf) zwingend.`
      },
      {
        id: 32,
        topic: "AGB – Allgemeine Geschäftsbedingungen",
        text: `Welche Aussagen zu Allgemeinen Geschäftsbedingungen (AGB) treffen zu?`,
        options: [
          `AGB gelten, wenn ein Vertragspartner auf sie verweist und der andere sie akzeptiert (ausdrücklich oder schlüssig).`,
          `AGB werden für immer wieder gleichartig abgeschlossene Verträge zusammengefasst.`,
          `Es gilt ein Transparenzgebot: unklare Regelungen gehen zum Nachteil des Verwenders.`,
          `AGB sind gegenüber Konsumenten generell unzulässig.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `AGB sind grundsätzlich zulässig, müssen aber wirksam einbezogen werden und transparent sein. Unklare oder gröblich benachteiligende Klauseln können unwirksam sein.`
      },
      {
        id: 33,
        topic: "Kostenvoranschlag – Verbraucher",
        text: `Welche Aussagen zu Kostenvoranschlägen an Verbraucher (KSchG) sind korrekt (ohne besondere Vereinbarung)?`,
        options: [
          `Der Kostenvoranschlag ist für den Verbraucher kostenlos.`,
          `Der genannte Preis ist verbindlich (darf grundsätzlich nicht überschritten werden).`,
          `Die Erstellung des Kostenvoranschlags ist kostenpflichtig.`,
          `Der genannte Preis ist unverbindlich.`
        ],
        correctIndices: [0, 1],
        explanation: `Beim Verbraucher gilt der KV ohne besondere Vereinbarung als kostenlos und verbindlich. Nur wenn vorher ausdrücklich anderes vereinbart wurde, kann er kostenpflichtig oder unverbindlich sein.`
      },
      {
        id: 34,
        topic: "Kostenvoranschlag – Unternehmergeschäft",
        text: `Wie unterscheidet sich der Kostenvoranschlag unter Unternehmern (ABGB) typischerweise vom Verbrauchergeschäft?`,
        options: [
          `Er ist grundsätzlich kostenpflichtig und unverbindlich.`,
          `Eine Überschreitung bis zu 15 % gilt als zulässig (mit Hinweispflicht).`,
          `Bei Überschreitung von mehr als 15 % besteht ein Rücktrittsrecht des Bestellers.`,
          `Er ist immer kostenlos und verbindlich.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Unter Unternehmern kann der KV kostenpflichtig und unverbindlich sein; Überschreitungen bis 15 % sind zulässig, darüber besteht ein Rücktrittsrecht (Vorarbeiten sind zu ersetzen).`
      },
      {
        id: 35,
        topic: "Sicherheiten – Eigentumsvorbehalt",
        text: `Welche Aussagen zum Eigentumsvorbehalt sind richtig?`,
        options: [
          `Er ist die Vereinbarung, dass der Käufer trotz Übergabe erst mit vollständiger Zahlung des Kaufpreises Eigentum erwirbt.`,
          `Ohne Eigentumsvorbehalt erwirbt der Käufer mit Übergabe Eigentum, auch wenn der Kaufpreis noch nicht bezahlt ist.`,
          `Im Insolvenzfall des Käufers hat der Verkäufer bei wirksamem Eigentumsvorbehalt grundsätzlich ein Aussonderungsrecht.`,
          `Der Eigentumsvorbehalt gilt automatisch bei jedem Warenverkauf, auch ohne Vereinbarung.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Der Eigentumsvorbehalt muss vereinbart werden; er sichert dem Verkäufer besondere Rechte bei Zahlungsverzug oder Insolvenz des Käufers (z.B. Aussonderungsrecht).`
      },
      {
        id: 36,
        topic: "Sicherheiten – Bankgarantie",
        text: `Welche Aussagen zur Bankgarantie treffen zu?`,
        options: [
          `Eine Bank gibt ein abstraktes Versprechen, bei Eintritt bestimmter Bedingungen an einen Dritten zu zahlen.`,
          `Sie wird u.a. zur Sicherung eines Haftrücklasses bei Bauverträgen verwendet.`,
          `Die Bankgarantie ist immer von der Gültigkeit des Grundgeschäfts abhängig (akzessorisch).`,
          `Die Bankgarantie ist vom Grundgeschäft grundsätzlich unabhängig (abstrakt).`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Die Bankgarantie ist ein abstraktes Zahlungsversprechen (unabhängig vom Grundgeschäft) und wird z.B. als Sicherstellung für Haftrücklässe genutzt.`
      },
      {
        id: 37,
        topic: "Sicherheiten – Konventionalstrafe",
        text: `Welche Aussagen zur Konventionalstrafe (= Pönale) sind korrekt?`,
        options: [
          `Sie ist ein pauschalierter Schadenersatz für den Fall nicht gehöriger Erfüllung.`,
          `Sie ist grundsätzlich verschuldensabhängig (bei schuldhaftem Verstoß).`,
          `Das Gericht kann eine überhöhte Konventionalstrafe mäßigen.`,
          `Sie ist niemals vertraglich vereinbar, sondern nur gesetzlich vorgesehen.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Die Konventionalstrafe ist vertraglich vereinbar und dient als pauschalierter Schadenersatz. Sie unterliegt dem richterlichen Mäßigungsrecht und ist grundsätzlich verschuldensabhängig.`
      },
      {
        id: 38,
        topic: "Zurückbehaltungsrecht",
        text: `Welche Aussagen zum Zurückbehaltungsrecht (§ 471 ABGB) sind zutreffend?`,
        options: [
          `Wer durch eine Sache einen Schaden erlitten oder Aufwand hatte, kann sie bis zur Sicherstellung seines Anspruchs zurückbehalten.`,
          `Die Sache ist unbedingt sofort zurückzugeben, eine Sicherstellung ist unzulässig.`,
          `Die Herausgabe kann Zug um Zug gegen Ersatz des Schaden/Aufwands verlangt werden.`,
          `Für unternehmensbezogene Geschäfte gibt es Sonderregeln im UGB.`
        ],
        correctIndices: [0, 2, 3],
        explanation: `Das Zurückbehaltungsrecht erlaubt es, die Sache bis zur Sicherstellung der Forderung zurückzubehalten. Herausgabe erfolgt Zug um Zug gegen Ersatz oder Sicherheitsleistung.`
      },
      {
        id: 39,
        topic: "Lieferverzug",
        text: `Welche Aussagen zum Lieferverzug treffen zu?`,
        options: [
          `Lieferverzug liegt vor, wenn die Leistung nicht rechtzeitig erbracht wird oder der Gläubiger eine verspätete/vertragswidrige Leistung nicht annimmt.`,
          `Beim Fixgeschäft zerfällt der Vertrag bei Nichterfüllung automatisch zum vereinbarten Zeitpunkt (absolutes Fixgeschäft).`,
          `Beim Termingeschäft kann nach Setzung und Ablauf einer angemessenen Nachfrist vom Vertrag zurückgetreten werden.`,
          `Bei Verzug bestehen nie Schadenersatzansprüche.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Beim Fixgeschäft entfällt die Leistungspflicht bei Nichterfüllung zum fixen Termin; beim Termingeschäft ist eine Nachfrist und Rücktritt möglich. Schadenersatz kann bei Verschulden zustehen.`
      },
      {
        id: 40,
        topic: "Annahmeverzug",
        text: `Wer trägt im Annahmeverzug die Gefahr des zufälligen Untergangs der Leistung (vereinfacht)?`,
        options: [
          `Der Schuldner (Leistungspflichtige).`,
          `Der Gläubiger (der die Leistung nicht annimmt).`,
          `Der Zustelldienst.`,
          `Der Inhaber des Lagers, in dem die Ware eingelagert wird.`
        ],
        correctIndices: [1],
        explanation: `Im Annahmeverzug geht die Gefahr des zufälligen Untergangs grundsätzlich auf den Gläubiger über.`
      },

      // --- 5. Gewährleistung / Schadenersatz / Produkthaftung / Verjährung ---
      {
        id: 41,
        topic: "Gewährleistung – Grundlagen",
        text: `Welche Aussagen zur gesetzlichen Gewährleistung sind richtig (vereinfacht)?`,
        options: [
          `Gewährleistung setzt voraus, dass der Mangel bereits bei Übergabe vorhanden war.`,
          `Gewährleistung ist verschuldensunabhängig.`,
          `Die Gewährleistungsfrist beträgt bei beweglichen Sachen regelmäßig 2 Jahre, bei unbeweglichen 3 Jahre.`,
          `Gewährleistungsansprüche können zwischen Unternehmer und Verbraucher vertraglich komplett ausgeschlossen werden.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Der Mangel muss bei Übergabe vorliegen; die Gewährleistung ist verschuldensunabhängig. Fristen: idR 2 Jahre (beweglich) und 3 Jahre (unbeweglich). Im Verbrauchergeschäft ist ein Ausschluss unzulässig.`
      },
      {
        id: 42,
        topic: "Gewährleistung – Beweislastumkehr",
        text: `Welche Aussagen zur Beweislastumkehr im Gewährleistungsrecht (Verbrauchergeschäft) sind zutreffend?`,
        options: [
          `Tritt ein Mangel innerhalb von sechs Monaten ab Übergabe auf, wird vermutet, dass der Mangel schon bei Übergabe vorhanden war.`,
          `In den ersten sechs Monaten muss der Verkäufer die Mangelfreiheit beweisen, wenn er die Vermutung widerlegen will.`,
          `In den ersten sechs Monaten trägt immer der Käufer die volle Beweislast für die Mangelhaftigkeit.`,
          `Die Vermutung gilt nicht bei typischen Verschleißerscheinungen.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Bis 6 Monate nach Übergabe gilt eine gesetzliche Vermutung zugunsten des Käufers; der Unternehmer muss ggf. beweisen, dass der Mangel nicht bei Übergabe vorhanden war. Verschleißteile können ausgenommen sein.`
      },
      {
        id: 43,
        topic: "Gewährleistung – primäre Rechtsbehelfe",
        text: `Welche primären Gewährleistungsbehelfe stehen dem Käufer zu (vereinfacht)?`,
        options: [
          `Verbesserung (Reparatur).`,
          `Austausch.`,
          `Wandlung (Vertragsaufhebung).`,
          `Preisminderung.`
        ],
        correctIndices: [0, 1, 2, 3],
        explanation: `Grundsätzlich sind Verbesserung oder Austausch vorrangig. Schlagen sie fehl oder sind unzumutbar, kommen Preisminderung oder Wandlung in Betracht.`
      },
      {
        id: 44,
        topic: "Gewährleistung vs. Garantie",
        text: `Welche Aussagen zum Verhältnis von Gewährleistung und Garantie sind richtig?`,
        options: [
          `Gewährleistung ist gesetzlich zwingend geregelt (kann gegenüber Verbrauchern nicht ausgeschlossen werden).`,
          `Garantie ist eine freiwillige, zusätzliche Zusage des Herstellers oder Verkäufers.`,
          `Die Garantiefrist ist gesetzlich immer 1 Jahr.`,
          `Die Garantie ändert nichts an den gesetzlichen Gewährleistungsrechten.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Garantie ist freiwillig und zusätzlich, kann aber die Gewährleistungsrechte nicht verkürzen. Die Dauer der Garantie ist vertraglich, nicht gesetzlich zwingend festgelegt.`
      },
      {
        id: 45,
        topic: "Schadenersatz – Voraussetzungen",
        text: `Welche Voraussetzungen müssen für einen Schadenersatzanspruch typischerweise kumulativ vorliegen?`,
        options: [
          `Schaden.`,
          `Rechtswidrigkeit.`,
          `Verschulden des Schädigers (sofern kein Gefährdungshaftungstatbestand).`,
          `Zufälliges Ereignis ohne Rechtswidrigkeit.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Klassische Voraussetzungen: Schaden, Rechtswidrigkeit, Kausalität und Verschulden. Ein bloß zufälliges Ereignis ohne Rechtswidrigkeit und Verschulden begründet grundsätzlich keinen Schadenersatzanspruch.`
      },
      {
        id: 46,
        topic: "Haftung für Erfüllungsgehilfen – § 1313a ABGB",
        text: `Welche Regelung des Schadenersatzrechts beschreibt § 1313a ABGB?`,
        options: [
          `Erfüllungsgehilfenhaftung (Haftung für Personen, deren man sich zur Vertragserfüllung bedient).`,
          `Organhaftung für Organe juristischer Personen.`,
          `Amtshaftung des Staates für rechtswidriges Verhalten seiner Organe.`,
          `Produkthaftung für fehlerhafte Produkte.`
        ],
        correctIndices: [0],
        explanation: `§ 1313a ABGB enthält die Erfüllungsgehilfenhaftung: Der Schuldner haftet für das Verschulden der Personen, deren er sich zur Erfüllung bedient, wie für sein eigenes.`
      },
      {
        id: 47,
        topic: "Produkthaftung",
        text: `Welche Aussagen zur Produkthaftung (PHG – stark vereinfacht) sind korrekt?`,
        options: [
          `Sie ist eine verschuldensunabhängige Haftung des Herstellers für fehlerhafte Produkte.`,
          `Die absolute Verjährungsfrist beträgt 10 Jahre ab Inverkehrbringen des Produkts.`,
          `Die Produkthaftung ersetzt immer sämtliche Gewährleistungsansprüche.`,
          `Sie zielt insbesondere auf Personen- und bestimmte Sachschäden ab.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Produkthaftung ist verschuldensunabhängig; die Ansprüche verjähren absolut nach 10 Jahren. Sie ergänzt die Gewährleistung, ersetzt sie aber nicht.`
      },
      {
        id: 48,
        topic: "Verjährung – allgemeine Fristen",
        text: `Welche Aussagen zur zivilrechtlichen Verjährung sind richtig (vereinfacht)?`,
        options: [
          `Verjährung bedeutet, dass der Anspruch bestehen bleibt, aber gerichtlich nicht mehr durchgesetzt werden kann.`,
          `Durch Verjährung erlischt der Anspruch immer automatisch und endgültig.`,
          `Die regelmäßige Verjährungsfrist für Forderungen des täglichen Lebens beträgt 3 Jahre.`,
          `Durch eine bloß außergerichtliche Mahnung kann die Verjährung grundsätzlich nicht dauerhaft verhindert, aber z.B. durch gerichtliche Geltendmachung unterbrochen werden.`
        ],
        correctIndices: [0, 3, 2],
        explanation: `Verjährung macht den Anspruch „undurchsetzbar“, er kann aber z.B. freiwillig erfüllt werden. Viele Forderungen verjähren nach 3 Jahren. Eine bloße Mahnung hemmt die Verjährung nicht; Klage oder Anerkenntnis können sie unterbrechen/hemmen.`
      },

      // --- 6. Sachenrecht / Eigentum / Ersitzung / Pfandrecht / Servitut / Grundbuch-Basics ---
      {
        id: 49,
        topic: "Eigentumserwerb",
        text: `Welche Aussagen zu Arten des Eigentumserwerbs sind korrekt?`,
        options: [
          `Der derivative Eigentumserwerb erfolgt durch Übertragung vom bisherigen Eigentümer (Titel und Modus).`,
          `Der originäre Eigentumserwerb erfolgt unabhängig vom Recht des Vormannes (z.B. Ersitzung).`,
          `Gutgläubiger Eigentumserwerb von einem Nichteigentümer ist an strenge Voraussetzungen geknüpft.`,
          `Originärer Eigentumserwerb ist bei Liegenschaften nicht möglich.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Derivative Erwerb: vom Vormann (z.B. Kauf + Übergabe/Verbücherung). Originärer Erwerb: unabhängig vom Vormann (Ersitzung, Fund etc.). Gutgläubiger Erwerb an beweglichen Sachen ist möglich; an Liegenschaften idR nur durch Ersitzung.`
      },
      {
        id: 50,
        topic: "Ersitzung",
        text: `Welche Voraussetzungen/Fristen für die Ersitzung gelten (stark vereinfacht)?`,
        options: [
          `Rechtmäßiger, redlicher und echter Besitz.`,
          `Ersitzungsfrist für bewegliche Sachen: in der Regel 3 Jahre.`,
          `Ersitzungsfrist für unbewegliche Sachen: in der Regel 30 Jahre.`,
          `Auch geliehene Sachen können ohne weiteres ersessen werden, wenn man sie lange genug behält.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Ersitzung setzt qualifizierten Besitz voraus. Fristen: idR 3 Jahre (bewegliche), 30 Jahre (unbewegliche). Geliehene Sachen sind nicht redlich/echt; Ersitzung scheidet dann aus.`
      },
      {
        id: 51,
        topic: "Pfandrecht – Grundsätze",
        text: `Welche Grundsätze des Pfandrechts sind richtig?`,
        options: [
          `Akzessorietät: Das Pfandrecht hängt vom Bestand der gesicherten Forderung ab und erlischt mit deren Tilgung.`,
          `Spezialität: Pfandrechte können nur an bestimmten, individualisierten Sachen begründet werden – nicht am gesamten Vermögen.`,
          `Priorität: Der Rang richtet sich nach dem Zeitpunkt der Bestellung/Eintragung; ältere Pfandrechte gehen jüngeren vor.`,
          `Publizität ist beim Pfandrecht bedeutungslos.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Pfandrecht folgt Akzessorietät, Spezialität, Priorität und Publizität. Pfandrechte sollen für Dritte erkennbar sein (Übergabe, Grundbuch).`
      },
      {
        id: 52,
        topic: "Pfandrecht – Arten",
        text: `Welche Aussagen zu Arten des Pfandrechts sind zutreffend?`,
        options: [
          `Faustpfand (Handpfand) ist ein Pfandrecht an einer beweglichen Sache.`,
          `Eine Hypothek ist ein Pfandrecht an einer Liegenschaft (im Grundbuch eingetragen).`,
          `Pfandrechte können nur an körperlichen Sachen, nicht an Forderungen bestellt werden.`,
          `Auch Forderungen oder Gesellschaftsanteile können verpfändet werden.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Faustpfand = bewegliche Sache in der Hand des Gläubigers; Hypothek = Pfandrecht an Liegenschaften. Auch unkörperliche Rechte (Forderungen, Anteile) können verpfändet werden.`
      },
      {
        id: 53,
        topic: "Servitut (Dienstbarkeit)",
        text: `Welche Aussagen zu Servituten (Dienstbarkeiten) sind richtig (vereinfacht)?`,
        options: [
          `Eine Servitut ist ein beschränkt dingliches Nutzungsrecht an einer fremden Sache.`,
          `Der Belastete muss typischerweise ein Dulden oder Unterlassen hinnehmen, aber keine aktive Leistung erbringen.`,
          `Servituten können auch durch Ersitzung entstehen.`,
          `Servituten verjähren bereits nach 5 Jahren Nichtausübung.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Servituten sind dingliche Nutzungsrechte; der Verpflichtete muss i.d.R. dulden/unterlassen. Ersitzung ist möglich; Verjährungsfristen sind wesentlich länger als 5 Jahre (z.B. 30 Jahre).`
      },
      {
        id: 54,
        topic: "Baurecht",
        text: `Welche Aussagen zum Baurecht (i.S. Baurechtsgesetz) sind richtig (vereinfacht)?`,
        options: [
          `Baurecht ist ein selbständiges, veräußerliches und vererbliches dingliches Recht an einer fremden Liegenschaft.`,
          `Es wird durch Eintragung im Grundbuch (eigenes Baurechtseinlageblatt) begründet.`,
          `Baurecht gilt als unbewegliche Sache.`,
          `Es darf nur von der öffentlichen Hand eingeräumt werden.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Baurecht wird grundbücherlich eingetragen und gilt als unbewegliche Sache. Es kann auch zwischen Privaten vereinbart werden, nicht nur durch die öffentliche Hand.`
      },
      {
        id: 55,
        topic: "Grundbuch – Aufbau",
        text: `Welche Bestandteile gehören typischerweise zum Grundbuch (vereinfachte Darstellung)?`,
        options: [
          `Hauptbuch mit A-, B- und C-Blatt.`,
          `Urkundensammlung.`,
          `Kataster (Grundstücksverzeichnis).`,
          `Flächenwidmungsplan.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Zum Grundbuch gehören u.a. Hauptbuch, Urkundensammlung und das Grundstücksverzeichnis (Kataster). Der Flächenwidmungsplan ist raumordnungsrechtlich, aber kein Teil des Grundbuchs.`
      },
      {
        id: 56,
        topic: "Grundbuch – A-, B-, C-Blatt",
        text: `Welche Zuordnungen zu den Blättern des Grundbuchs sind richtig (vereinfacht)?`,
        options: [
          `A-Blatt: Gutsbestand/Benützungsart (z.B. Grundstücksnummer, Widmung).`,
          `B-Blatt: Eigentumsverhältnisse (Eigentümer, Miteigentum, Wohnungseigentum).`,
          `C-Blatt: Lasten wie Hypotheken, Dienstbarkeiten, Reallasten.`,
          `Im B-Blatt werden nur Pfandrechte eingetragen.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `A-Blatt: Gutsbestand; B-Blatt: Eigentümer; C-Blatt: Lasten. Pfandrechte (Hypotheken) stehen im C-Blatt, nicht im B-Blatt.`
      },
      {
        id: 57,
        topic: "Grundbuch – Plombe",
        text: `Welche Aussagen zur „Plombe“ im Grundbuch sind zutreffend?`,
        options: [
          `Sie zeigt an, dass ein Grundbuchsgesuch (z.B. Einverleibung) anhängig ist.`,
          `Während aufrechter Plombe kann auf den angezeigten Grundbuchsstand nur eingeschränkt vertraut werden.`,
          `Aus der TZ der Plombe wird später (bei Eintrag) die „letzte TZ“.`,
          `Die Plombe bedeutet, dass der Grundbuchsauszug geheim ist und nur von Gerichten eingesehen werden darf.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Die Plombe ist ein Hinweis auf ein laufendes Eintragungsbegehren; der Stand kann sich durch die beabsichtigte Eintragung ändern. Mit Eintragung wird aus der Plomben-TZ eine „letzte TZ“.`
      },
      {
        id: 58,
        topic: "Grundbuch – Sachenrechte",
        text: `Welche dinglichen Rechte werden typischerweise im Grundbuch einverleibt (vereinfacht)?`,
        options: [
          `Servituten (z.B. Geh- und Fahrrecht).`,
          `Reallasten.`,
          `Baurecht.`,
          `Ein bloßer Mietvertrag über eine Wohnung.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Servituten, Reallasten, Baurechte und Hypotheken sind typische grundbücherliche Rechte. Mietverträge werden i.d.R. nicht verbüchert (Ausnahmen bei bestimmten Dienstbarkeiten/Wohnrechten).`
      },
      {
        id: 59,
        topic: "Grundbuch – Eintragungsprinzip",
        text: `Welche Aussagen zum Eintragungsprinzip im Grundbuch sind richtig?`,
        options: [
          `Rechte an Liegenschaften entstehen grundsätzlich erst mit Einverleibung ins Grundbuch (außer z.B. Ersitzung, Enteignung).`,
          `Privat vereinbarte Eigentumsübertragung ohne Verbücherung bleibt gegenüber Dritten grundsätzlich wirkungslos.`,
          `Die Rangordnung richtet sich nach der Eintragungs- bzw. Anmerkungsreihenfolge.`,
          `Das Eintragungsprinzip spielt für Liegenschaftsrechte keine Rolle.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Für Liegenschaftsrechte gilt das Eintragungsprinzip: Dingliche Rechte entstehen regelmäßig durch Einverleibung; Dritte können auf das Grundbuch vertrauen.`
      },
      {
        id: 60,
        topic: "Justizberufe / Überblick",
        text: `Welche Aussagen zu Berufen in der österreichischen Justiz sind richtig (kurzer Überblick)?`,
        options: [
          `Richterinnen und Richter sind unabhängig und nur dem Gesetz unterworfen.`,
          `Staatsanwälte vertreten im Strafverfahren die Anklage.`,
          `Rechtsanwältinnen/Rechtsanwälte vertreten und beraten Parteien in Zivil- und Strafverfahren.`,
          `Notare vollziehen ausschließlich Strafurteile.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Richter sind unabhängig; Staatsanwälte vertreten die Anklage; Rechtsanwälte vertreten Parteien; Notare übernehmen u.a. Beurkundungen, Verlassenschaften, Gesellschaftsgründungen – sie vollziehen keine Strafurteile.`
      }
    ];

    // =========================
    // GRUNDBUCH-MODUS – FÄLLE
    // =========================

    const GRUNDBUCH_QUESTIONS = [
      {
        id: "G1",
        topic: "Grundbuchfall 1 – Eigentum & Hypothek",
        contextHtml: `<pre>Grundbuch: 01001 Wien-Innere Stadt
Einlagezahl (EZ): 1234
Grundstück: 567/1 Baufläche (Gebäude)
Adresse: 1010 Wien, Musterstraße 1

A-Blatt:
  Grundstücksadresse: Musterstraße 1
  Benützungsart: Baufläche (Wohn- und Geschäftshaus)

B-Blatt:
  B-LNR 1: Max Mustermann, 1/1 Eigentümer

C-Blatt:
  C-LNR 1: Höchstbetragshypothek EUR 300.000,-- zugunsten ABC-Bank AG
  C-LNR 2: Dienstbarkeit des Geh- und Fahrrechts zugunsten EZ 987</pre>`,
        text: `Welche Aussagen zu diesem Grundbuchsauszug sind richtig?`,
        options: [
          `Eigentümer der Liegenschaft ist Max Mustermann (B-Blatt).`,
          `Die Hypothek zugunsten der ABC-Bank AG ist im B-Blatt eingetragen.`,
          `Das Geh- und Fahrrecht ist eine Dienstbarkeit und im C-Blatt vermerkt.`,
          `Im A-Blatt findet man u.a. Benützungsart und Grundstücksnummer.`
        ],
        correctIndices: [0, 2, 3],
        explanation: `Eigentümer stehen im B-Blatt. Lasten (Hypothek, Dienstbarkeit) stehen im C-Blatt. Gutsbestand (Adresse, Benützungsart) ist im A-Blatt.`
      },
      {
        id: "G2",
        topic: "Grundbuchfall 1 – Belastungen",
        contextHtml: `<pre>Grundbuch: 01001 Wien-Innere Stadt
Einlagezahl (EZ): 1234
Grundstück: 567/1 Baufläche (Gebäude)
Adresse: 1010 Wien, Musterstraße 1

A-Blatt:
  Grundstücksadresse: Musterstraße 1
  Benützungsart: Baufläche (Wohn- und Geschäftshaus)

B-Blatt:
  B-LNR 1: Max Mustermann, 1/1 Eigentümer

C-Blatt:
  C-LNR 1: Höchstbetragshypothek EUR 300.000,-- zugunsten ABC-Bank AG
  C-LNR 2: Dienstbarkeit des Geh- und Fahrrechts zugunsten EZ 987</pre>`,
        text: `Welche Aussagen zur Hypothek und zur Dienstbarkeit sind zutreffend?`,
        options: [
          `Die Hypothek ist ein Pfandrecht an der Liegenschaft und dient der Sicherung einer Forderung der Bank.`,
          `Die Dienstbarkeit erlaubt einem anderen Grundstück (EZ 987) die Benützung (Geh- und Fahrrecht).`,
          `Die Hypothek kann nur durch Löschung im Grundbuch (Einverleibung der Löschung) beendet werden, nicht durch Tilgung der gesicherten Forderung.`,
          `Dienstbarkeiten sind beschränkte dingliche Nutzungsrechte an einer fremden Sache.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Hypothek = Pfandrecht; Dienstbarkeit = beschränktes Nutzungsrecht zugunsten eines anderen Grundstücks. Die Tilgung der Forderung ist Voraussetzung für die Löschung, rechtlich beendet wird das Pfandrecht aber durch Verbücherung der Löschung.`
      },
      {
        id: "G3",
        topic: "Grundbuchfall 2 – Wohnungseigentum",
        contextHtml: `<pre>Grundbuch: 01234 Wien-Donaustadt
Einlagezahl (EZ): 456
Grundstück: 321/2 Baufläche (Gebäude)
Adresse: 1220 Wien, Beispielgasse 10

Aufschrift: "Wohnungseigentum"

A-Blatt:
  Gutsbestand: Grundstück Nr. 321/2, Baufläche
  Benützungsart: Wohnhaus

B-Blatt:
  B-LNR 1: Wohnungseigentum Top 1: Anna Beispiel, ideeller Anteil 120/1000
  B-LNR 2: Wohnungseigentum Top 2: Bernhard Beispiel, ideeller Anteil 180/1000
  B-LNR 3: Wohnungseigentum Top 3: Carla Beispiel, ideeller Anteil 700/1000

C-Blatt:
  C-LNR 1: Hypothek EUR 200.000,-- zugunsten XYZ-Bank AG, haftet auf den Anteilen B-LNR 1 und 2</pre>`,
        text: `Welche Aussagen sind richtig?`,
        options: [
          `Es handelt sich um eine Wohnungseigentumsanlage (erkennbar an der Aufschrift).`,
          `Alle Wohnungseigentümer sind auch Miteigentümer an der gesamten Liegenschaft.`,
          `Die Hypothek der XYZ-Bank AG belastet nur die Anteile von Top 1 und 2.`,
          `Carla Beispiel ist Mieterin und daher nicht im Grundbuch aufscheinfähig.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Wohnungseigentum setzt Miteigentum an der Liegenschaft voraus. Hypotheken können einzelnen Anteilen zugeordnet sein. Carla Beispiel ist Wohnungseigentümerin, nicht bloß Mieterin.`
      },
      {
        id: "G4",
        topic: "Grundbuchfall 2 – Rang und Belastungen",
        contextHtml: `<pre>Grundbuch: 01234 Wien-Donaustadt
Einlagezahl (EZ): 456
...
C-Blatt:
  C-LNR 1: Hypothek EUR 200.000,-- zugunsten XYZ-Bank AG, haftet auf den Anteilen B-LNR 1 und 2
  (weitere Eintragungen derzeit nicht)</pre>`,
        text: `Welche Aussagen zum Rang der Hypothek sind zutreffend (vereinfacht)?`,
        options: [
          `Solange keine weiteren Pfandrechte eingetragen sind, hat die XYZ-Bank den ersten Rang.`,
          `Wird später eine weitere Hypothek eingetragen, kommt diese im Rang hinter die bestehende Hypothek.`,
          `Der Rang richtet sich nach dem Zeitpunkt der Einverleibung (bzw. TZ).`,
          `Der Rang spielt bei Pfandrechten keine Rolle.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Pfandrecht folgt dem Prioritätsprinzip: ältere Eintragung geht jüngeren im Rang vor.`
      },
      {
        id: "G5",
        topic: "Grundbuchfall 3 – Plombe",
        contextHtml: `<pre>Grundbuch: 01015 Wien-Favoriten
Einlagezahl (EZ): 987
Grundstück: 45/1 Baufläche
Adresse: 1100 Wien, Neubaugasse 5

A-Blatt:
  Gutsbestand: Grundstück 45/1
  Benützungsart: Baufläche (Mehrfamilienhaus)

B-Blatt:
  B-LNR 1: Peter Muster, 1/1 Eigentümer

C-Blatt:
  (derzeit keine Eintragungen)

Aktueller Auszug:
  TZ 1123/2025: PLOMBE (Antrag auf Einverleibung eines Kaufvertrags zugunsten Maria Neu)</pre>`,
        text: `Welche Aussagen zu dieser Plombe sind richtig?`,
        options: [
          `Die Plombe zeigt an, dass ein Grundbuchsgesuch (hier: Kaufvertrag zugunsten Maria Neu) in Bearbeitung ist.`,
          `Bis zur Entscheidung über das Gesuch kann sich der Eigentümerstand ändern.`,
          `Bis zur Löschung/Erledigung der Plombe kann auf den derzeitigen Eigentümerstand nur eingeschränkt vertraut werden.`,
          `Die Plombe bedeutet, dass keine Einsicht in das Grundbuch mehr möglich ist.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Die Plombe zeigt ein laufendes Eintragungsgesuch; der Eigentümerstand könnte sich nach Einverleibung ändern. Die Einsicht in das Grundbuch bleibt möglich.`
      },
      {
        id: "G6",
        topic: "Grundbuchfall 3 – Eigentümerwechsel",
        contextHtml: `<pre>Grundbuch: 01015 Wien-Favoriten
EZ 987, Neubaugasse 5

B-Blatt (nach Einverleibung):
  B-LNR 1: Peter Muster, 1/1 Eigentümer (gelöscht)
  B-LNR 2: Maria Neu, 1/1 Eigentümerin (eingetragen aufgrund Kaufvertrag, TZ 1123/2025)</pre>`,
        text: `Welche Aussagen zur Einverleibung des Eigentums sind korrekt?`,
        options: [
          `Maria Neu wurde erst durch die Einverleibung im B-Blatt zur Eigentümerin.`,
          `Der Kaufvertrag allein ohne Eintragung hätte für Dritte keine dingliche Wirkung.`,
          `Peter Muster ist nach der Einverleibung nicht mehr Eigentümer im Grundbuch.`,
          `Der Kaufpreis muss nicht bezahlt werden, damit Eigentum übergeht.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Bei Liegenschaften entsteht Eigentum in der Regel mit Einverleibung im Grundbuch (Eintragungsprinzip). Der bloße Vertrag wirkt nur schuldrechtlich.`
      },
      {
        id: "G7",
        topic: "Grundbuchfall 4 – Dienstbarkeit",
        contextHtml: `<pre>Grundbuch: 03101 Wiener Umland
Einlagezahl (EZ): 222
Grundstück: 12/3 Landfläche
Adresse: 2300 Beispielstadt, Feldweg 2

A-Blatt:
  Gutsbestand: Grundstück 12/3, Land- und Forstwirtschaft

B-Blatt:
  B-LNR 1: Franz Feld, 1/1 Eigentümer

C-Blatt:
  C-LNR 1: Dienstbarkeit des Geh- und Fahrrechts zugunsten EZ 221</pre>`,
        text: `Welche Aussagen zu dieser Dienstbarkeit sind zutreffend?`,
        options: [
          `EZ 222 ist die dienende Liegenschaft (muss das Recht dulden).`,
          `EZ 221 ist die herrschende Liegenschaft (darf das Geh- und Fahrrecht ausüben).`,
          `Die Dienstbarkeit bedeutet, dass der Eigentümer von EZ 221 auch Eigentümer von EZ 222 ist.`,
          `Die Dienstbarkeit ist im C-Blatt einzutragen.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Die belastete Liegenschaft ist dienend, die begünstigte herrschend. Die Dienstbarkeit wird im C-Blatt verbüchert. Eigentümeridentität ist nicht erforderlich.`
      },
      {
        id: "G8",
        topic: "Grundbuchfall 4 – Auswirkungen der Veräußerung",
        contextHtml: `<pre>Grundbuch: 03101 Wiener Umland
EZ 222, C-LNR 1: Dienstbarkeit des Geh- und Fahrrechts zugunsten EZ 221</pre>`,
        text: `Was passiert bei einem Verkauf der dienenden Liegenschaft EZ 222?`,
        options: [
          `Die Dienstbarkeit bleibt grundsätzlich bestehen, weil sie ein dingliches Recht ist.`,
          `Der neue Eigentümer muss das Geh- und Fahrrecht weiterhin dulden.`,
          `Mit dem Verkauf erlischt die Dienstbarkeit automatisch.`,
          `Der neue Eigentümer kann die Dienstbarkeit nach Belieben löschen lassen.`
        ],
        correctIndices: [0, 1],
        explanation: `Dienstbarkeiten sind dingliche Rechte und gehen mit der Liegenschaft über. Der neue Eigentümer tritt in die Belastung ein; eine Löschung erfordert Einigung und Verbücherung.`
      },
      {
        id: "G9",
        topic: "Grundbuchfall 5 – Reallast",
        contextHtml: `<pre>Grundbuch: 04567 Land
EZ 333, Bauernhof

C-Blatt:
  C-LNR 1: Reallast – Wohn- und Versorgungsrecht zugunsten Frau Altbauerin
            (lebenslängliches Wohnrecht und Versorgung aus dem Hof)</pre>`,
        text: `Welche Aussagen zur Reallast sind richtig (vereinfacht)?`,
        options: [
          `Die Reallast ist eine dingliche Belastung der Liegenschaft zugunsten einer bestimmten Person.`,
          `Sie kann z.B. ein Wohn- und Versorgungsrecht sichern.`,
          `Sie wirkt auch gegenüber Rechtsnachfolgern des Eigentümers.`,
          `Sie ist ein rein schuldrechtlicher Anspruch, der nicht im Grundbuch aufscheinen kann.`
        ],
        correctIndices: [0, 1, 2],
        explanation: `Reallasten sind dingliche Belastungen (z.B. Wohn-/Versorgungsrechte), die im Grundbuch eingetragen werden und gegenüber Rechtsnachfolgern wirken.`
      },
      {
        id: "G10",
        topic: "Grundbuchfall 6 – Mehrere Pfandrechte",
        contextHtml: `<pre>Grundbuch: 01001 Wien-Innere Stadt
EZ 999, Zinshaus

C-Blatt:
  C-LNR 1: Hypothek EUR 500.000,-- zugunsten Erste Bank, TZ 100/2020
  C-LNR 2: Hypothek EUR 200.000,-- zugunsten Zweite Bank, TZ 300/2023</pre>`,
        text: `Welche Aussagen zu diesen Pfandrechten sind zutreffend?`,
        options: [
          `Die Hypothek der Ersten Bank hat aufgrund der älteren TZ den besseren Rang.`,
          `Im Verwertungsfall wird die Erste Bank aus dem Versteigerungserlös vor der Zweiten Bank befriedigt.`,
          `Die zweite Hypothek ist automatisch unwirksam, weil schon eine Hypothek besteht.`,
          `Die Rangfolge richtet sich nach der Reihenfolge der Eintragung.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Mehrere Pfandrechte können nebeneinander bestehen. Im Verwertungsfall wird nach Rang (TZ) befriedigt – zuerst das ältere Pfandrecht.`
      },
      {
        id: "G11",
        topic: "Grundbuchfall 7 – Löschung einer Hypothek",
        contextHtml: `<pre>Grundbuch: 01001 Wien-Innere Stadt
EZ 999, Zinshaus

C-Blatt (alt):
  C-LNR 1: Hypothek EUR 500.000,-- zugunsten Erste Bank

C-Blatt (neu):
  C-LNR 1: gelöscht (Löschungsvermerk aufgrund Löschungsquittung der Bank)</pre>`,
        text: `Welche Aussagen zur Löschung einer Hypothek sind korrekt (vereinfacht)?`,
        options: [
          `Für die Löschung ist in der Regel eine Löschungsbewilligung (Quittung) des Pfandgläubigers erforderlich.`,
          `Die Löschung wird als Eintragung (Löschung) im C-Blatt verbüchert.`,
          `Mit Tilgung der gesicherten Forderung erlischt das Pfandrecht automatisch im Grundbuch, ohne dass eine Löschung nötig ist.`,
          `Die Löschung beseitigt das Pfandrecht im Grundbuch.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Auch wenn die Forderung getilgt ist, muss die Löschung im Grundbuch beantragt und verbüchert werden. Erst die Löschung entfernt das Pfandrecht grundbücherlich.`
      },
      {
        id: "G12",
        topic: "Grundbuchfall 8 – Anmerkung Rangordnung",
        contextHtml: `<pre>Grundbuch: 02002 Wien-Leopoldstadt
EZ 777, Neubauprojekt

B-Blatt:
  B-LNR 1: Bauträger GmbH, 1/1 Eigentümer

C-Blatt:
  C-LNR 1: Anmerkung der Rangordnung für die beabsichtigte Veräußerung (Treuhänderrangordnung)</pre>`,
        text: `Welche Aussagen zur Anmerkung einer Rangordnung (z.B. nach BTVG) sind zutreffend (vereinfacht)?`,
        options: [
          `Die Rangordnung sichert den zukünftigen Erwerbern von Wohnungseigentum einen bestimmten Rang für die Einverleibung.`,
          `Sie ist besonders beim Erwerb von Bauträgerwohnungen wichtig.`,
          `Ohne Rangordnung kann niemals Wohnungseigentum begründet werden.`,
          `Die Rangordnung wird im C-Blatt angemerkt.`
        ],
        correctIndices: [0, 1, 3],
        explanation: `Die Rangordnung dient der Sicherung des Rangs für spätere Einverleibungen (z.B. Wohnungseigentumserwerb). Sie wird im C-Blatt angemerkt; Wohnungseigentum kann auch ohne Rangordnung begründet werden, aber mit weniger Sicherung.`
      }
    ];

    // =======================================
    // QUIZ-LOGIK – Mehrfachantworten & Modi
    // =======================================

    let currentMode = null; // "all" oder "grundbuch"
    let currentQuestions = [];
    let questionOrder = [];
    let currentOrderIndex = 0;
    let userAnswers = []; // Array von Arrays mit ausgewählten Indizes
    let questionChecked = []; // bool pro Frage
    let quizFinished = false;

    const MODE_LABELS = {
      all: "Gesamt-Quiz: Öffentliches & Privatrecht",
      grundbuch: "Spezial-Modus: Grundbuchauszüge"
    };

    document.addEventListener("DOMContentLoaded", () => {
      const modeButtons = document.querySelectorAll(".mode-card[data-mode]");
      const modeSelectSection = document.getElementById("mode-select");
      const quizMain = document.getElementById("quiz-main");
      const modeLabel = document.getElementById("current-mode-label");

      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const checkBtn = document.getElementById("check-btn");
      const evalBtn = document.getElementById("eval-btn");

      modeButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const mode = btn.getAttribute("data-mode");
          startQuiz(mode);
          modeLabel.textContent = MODE_LABELS[mode] || "–";
          modeSelectSection.classList.add("hidden");
          quizMain.classList.remove("hidden");
        });
      });

      prevBtn.addEventListener("click", showPrevQuestion);
      nextBtn.addEventListener("click", showNextQuestion);
      checkBtn.addEventListener("click", checkCurrentQuestion);
      evalBtn.addEventListener("click", evaluateQuiz);

      // Optional: Tastaturnavigation (Pfeiltasten, Enter)
      document.addEventListener("keydown", (e) => {
        if (!currentQuestions.length) return;
        if (e.key === "ArrowRight") {
          showNextQuestion();
        } else if (e.key === "ArrowLeft") {
          showPrevQuestion();
        } else if (e.key === "Enter") {
          // Enter prüft die aktuelle Frage
          e.preventDefault();
          checkCurrentQuestion();
        }
      });
    });

    function startQuiz(mode) {
      currentMode = mode;
      currentQuestions =
        mode === "grundbuch" ? GRUNDBUCH_QUESTIONS : ALL_QUESTIONS;
      questionOrder = currentQuestions.map((_, idx) => idx);
      shuffle(questionOrder);
      currentOrderIndex = 0;
      userAnswers = currentQuestions.map(() => []);
      questionChecked = currentQuestions.map(() => false);
      quizFinished = false;

      const scoreBanner = document.getElementById("score-banner");
      scoreBanner.classList.add("hidden");

      renderCurrentQuestion();
      updateProgressInfo();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function renderCurrentQuestion() {
      if (!currentQuestions.length) return;
      const questionContainer = document.getElementById("question-container");
      const total = currentQuestions.length;
      const qIndex = questionOrder[currentOrderIndex];
      const q = currentQuestions[qIndex];

      const optionHtml = q.options
        .map((opt, idx) => {
          const selected = (userAnswers[qIndex] || []).includes(idx)
            ? "checked"
            : "";
          const letter = String.fromCharCode(97 + idx); // a, b, c, ...
          return `
            <label class="option">
              <input type="checkbox" name="q-${qIndex}" value="${idx}" ${selected}>
              <span class="option-letter">${letter})</span>
              <span class="option-text">${opt}</span>
            </label>
          `;
        })
        .join("");

      const contextHtml = q.contextHtml
        ? `<div class="question-context">${q.contextHtml}</div>`
        : "";

      const explanationHtml = `
        <div class="explanation hidden" id="explanation">
          <strong>Lösung &amp; kurze Begründung:</strong><br>
          ${q.explanation}
        </div>
      `;

      questionContainer.innerHTML = `
        <div class="question-card" id="question-card">
          <div class="question-header">
            <div class="question-number">Frage ${
              currentOrderIndex + 1
            } von ${total}</div>
            <div class="question-topic">${q.topic || ""}</div>
          </div>
          <div class="question-text">${q.text}</div>
          ${contextHtml}
          <div class="question-note">
            Mehrfachauswahl möglich – es können <b>eine oder mehrere</b> Antworten richtig sein.
          </div>
          <div class="options">
            ${optionHtml}
          </div>
          ${explanationHtml}
          <div class="message" id="message"></div>
        </div>
      `;

      // Wenn die Frage schon geprüft wurde, Darstellung wieder anwenden
      if (questionChecked[qIndex]) {
        const card = document.getElementById("question-card");
        const selected = userAnswers[qIndex] || [];
        applyEvaluationStyles(card, currentQuestions[qIndex], selected);
        const explEl = document.getElementById("explanation");
        if (explEl) explEl.classList.remove("hidden");
      }

      updateProgressInfo();
    }

    function showPrevQuestion() {
      if (!currentQuestions.length) return;
      if (currentOrderIndex > 0) {
        currentOrderIndex -= 1;
        renderCurrentQuestion();
      }
    }

    function showNextQuestion() {
      if (!currentQuestions.length) return;
      if (currentOrderIndex < questionOrder.length - 1) {
        currentOrderIndex += 1;
        renderCurrentQuestion();
      }
    }

    function checkCurrentQuestion() {
      if (!currentQuestions.length) return;
      const qIndex = questionOrder[currentOrderIndex];
      const q = currentQuestions[qIndex];
      const card = document.getElementById("question-card");
      if (!card) return;

      const checkboxes = card.querySelectorAll('input[type="checkbox"]');
      const selectedIndices = [];
      checkboxes.forEach((cb, idx) => {
        if (cb.checked) selectedIndices.push(idx);
      });

      const messageEl = document.getElementById("message");
      if (!selectedIndices.length) {
        if (messageEl) {
          messageEl.textContent =
            "Bitte wähle mindestens eine Antwort aus, bevor du prüfst.";
        }
        return;
      } else if (messageEl) {
        messageEl.textContent = "";
      }

      selectedIndices.sort((a, b) => a - b);
      userAnswers[qIndex] = selectedIndices;
      questionChecked[qIndex] = true;

      applyEvaluationStyles(card, q, selectedIndices);

      const explEl = document.getElementById("explanation");
      if (explEl) explEl.classList.remove("hidden");

      updateProgressInfo();
    }

    function applyEvaluationStyles(card, question, selectedIndices) {
      const optionsEls = card.querySelectorAll(".option");
      const selectedSet = new Set(selectedIndices);
      const correctSet = new Set(question.correctIndices);

      optionsEls.forEach((optEl, idx) => {
        optEl.classList.remove("correct", "incorrect", "unselected-correct");

        const isSelected = selectedSet.has(idx);
        const isCorrect = correctSet.has(idx);

        if (isCorrect && isSelected) {
          optEl.classList.add("correct");
        } else if (!isCorrect && isSelected) {
          optEl.classList.add("incorrect");
        } else if (isCorrect && !isSelected) {
          optEl.classList.add("unselected-correct");
        }
      });
    }

    function isAnswerCorrect(question, selectedIndices) {
      if (!selectedIndices || !selectedIndices.length) return false;
      const correct = question.correctIndices || [];
      if (selectedIndices.length !== correct.length) return false;
      const selSet = new Set(selectedIndices);
      for (const idx of correct) {
        if (!selSet.has(idx)) return false;
      }
      return true;
    }

    function updateProgressInfo() {
      const total = currentQuestions.length || 0;
      const infoCurrent = document.getElementById("info-current-question");
      const infoTotal = document.getElementById("info-total-questions");
      const infoChecked = document.getElementById("info-checked");
      const infoCorrect = document.getElementById("info-correct");

      if (infoCurrent) {
        infoCurrent.textContent = total
          ? `${currentOrderIndex + 1}`
          : "–";
      }
      if (infoTotal) {
        infoTotal.textContent = total ? `${total}` : "–";
      }

      const checkedCount = questionChecked.filter(Boolean).length;
      let correctCount = 0;
      currentQuestions.forEach((q, idx) => {
        if (questionChecked[idx]) {
          if (isAnswerCorrect(q, userAnswers[idx])) {
            correctCount += 1;
          }
        }
      });

      if (infoChecked) {
        infoChecked.textContent = total ? `${checkedCount}` : "–";
      }
      if (infoCorrect) {
        infoCorrect.textContent = total ? `${correctCount}` : "–";
      }
    }

    function evaluateQuiz() {
      if (!currentQuestions.length) return;
      const total = currentQuestions.length;
      let correctCount = 0;

      currentQuestions.forEach((q, idx) => {
        if (isAnswerCorrect(q, userAnswers[idx])) {
          correctCount += 1;
        }
      });

      const percent = total ? Math.round((correctCount * 100) / total) : 0;

      let gradeText;
      if (percent >= 90) gradeText = "Note 1 – Sehr gut";
      else if (percent >= 80) gradeText = "Note 2 – Gut";
      else if (percent >= 65) gradeText = "Note 3 – Befriedigend";
      else if (percent >= 50) gradeText = "Note 4 – Genügend";
      else gradeText = "Note 5 – Nicht genügend";

      const scoreBanner = document.getElementById("score-banner");
      const scorePercent = document.getElementById("score-percent");
      const scoreGrade = document.getElementById("score-grade");
      const scoreDetails = document.getElementById("score-details");

      if (scorePercent) scorePercent.textContent = `${percent}%`;
      if (scoreGrade) scoreGrade.textContent = gradeText;
      if (scoreDetails) {
        scoreDetails.textContent = `Richtig beantwortet: ${correctCount} von ${total} Fragen.`;
      }

      if (scoreBanner) scoreBanner.classList.remove("hidden");

      quizFinished = true;
    }
  </script>
</body>
</html>