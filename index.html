<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Rechtsgrundlagen – Prüfungsquiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #e5e7eb;
      --card-bg: #ffffff;
      --panel-bg: #f9fafb;
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.08);
      --accent-border: rgba(37, 99, 235, 0.5);
      --text: #0f172a;
      --text-soft: #64748b;
      --border-subtle: rgba(148, 163, 184, 0.6);
      --danger: #dc2626;
      --danger-soft: rgba(220, 38, 38, 0.08);
      --success: #16a34a;
      --success-soft: rgba(22, 163, 74, 0.08);
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
      --shadow-subtle: 0 6px 16px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    body {
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 1100px;
      background: var(--card-bg);
      border-radius: 22px;
      padding: 18px 18px 20px;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .app::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(148, 163, 184, 0.15), transparent 60%);
      pointer-events: none;
      opacity: 0.85;
      z-index: -1;
    }

    .app-header {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 12px;
    }

    .title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .app-title {
      font-size: 22px;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title span {
      background: linear-gradient(120deg, #0f172a, #1d4ed8);
      -webkit-background-clip: text;
      color: transparent;
    }

    .tag-pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      color: var(--text-soft);
      background: rgba(248, 250, 252, 0.9);
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-soft);
      max-width: 780px;
    }

    .subtitle b {
      color: var(--text);
      font-weight: 600;
    }

    .mode-info-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 2px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .mode-info-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(203, 213, 225, 0.9);
      background: rgba(248, 250, 252, 0.98);
    }

    .mode-info-row span strong {
      color: var(--text);
      font-weight: 600;
    }

    .hidden {
      display: none !important;
    }

    .quiz-header-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
      margin-bottom: 10px;
    }

    .mode-pill-current {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--accent-border);
      background: rgba(239, 246, 255, 0.9);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #1d4ed8;
    }

    .quiz-actions {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 260px) minmax(0, 1.5fr);
      gap: 14px;
    }

    .info-column {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .info-card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      background: var(--panel-bg);
      padding: 10px 11px 11px;
      font-size: 12px;
      box-shadow: var(--shadow-subtle);
    }

    .info-card h3 {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-soft);
      margin: 0 0 6px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }

    .info-item {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 6px 7px;
      border-radius: 10px;
      border: 1px solid rgba(203, 213, 225, 0.9);
      background: #ffffff;
    }

    .info-item-label {
      font-size: 11px;
      color: var(--text-soft);
    }

    .info-item-value {
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
    }

    .info-small {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    .score-banner {
      margin-top: 4px;
      padding: 8px 9px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: #ffffff;
      font-size: 12px;
      color: var(--text);
      box-shadow: var(--shadow-subtle);
    }

    .score-banner.positive {
      border-color: rgba(22, 163, 74, 0.85);
      box-shadow: 0 12px 28px rgba(22, 163, 74, 0.25);
    }

    .score-banner.negative {
      border-color: rgba(220, 38, 38, 0.9);
      box-shadow: 0 12px 28px rgba(220, 38, 38, 0.22);
    }

    .score-main {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 3px;
    }

    .score-percent {
      font-size: 20px;
      font-weight: 700;
    }

    .score-grade {
      font-size: 13px;
      font-weight: 600;
    }

    .score-details {
      font-size: 11px;
      color: var(--text-soft);
    }

    .question-column {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .question-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 6px;
      max-height: 110px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .qnav-item {
      min-width: 28px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      font-size: 11px;
      text-align: center;
      cursor: pointer;
      color: var(--text-soft);
      transition: background 0.15s ease, border-color 0.15s ease,
        color 0.15s ease, transform 0.06s ease;
    }

    .qnav-item:hover {
      background: var(--accent-soft);
      border-color: var(--accent-border);
      color: #1d4ed8;
      transform: translateY(-0.5px);
    }

    .qnav-item.current {
      background: var(--accent);
      color: #ffffff;
      border-color: var(--accent);
    }

    .qnav-item.answered {
      background: var(--accent-soft);
      border-color: var(--accent-border);
      color: #1d4ed8;
    }

    .question-card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      padding: 12px 14px 13px;
      box-shadow: var(--shadow-subtle);
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 6px;
    }

    .question-number {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-soft);
    }

    .question-topic {
      font-size: 11px;
      color: var(--text-soft);
      text-align: right;
    }

    .question-text {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .question-note {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 6px;
    }

    .option {
      position: relative;
      display: flex;
      align-items: flex-start;
      gap: 7px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(203, 213, 225, 0.9);
      background: #ffffff;
      cursor: pointer;
      font-size: 13px;
      transition: border-color 0.15s ease, background 0.15s ease,
        transform 0.06s ease;
    }

    .option:hover {
      border-color: var(--accent-border);
      background: var(--accent-soft);
      transform: translateY(-0.5px);
    }

    .option input[type="checkbox"] {
      margin-top: 2px;
      accent-color: var(--accent);
      width: 15px;
      height: 15px;
      flex-shrink: 0;
      cursor: pointer;
    }

    .option-letter {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-soft);
      margin-top: 1px;
      flex-shrink: 0;
      width: 22px;
    }

    .option-text {
      flex: 1;
    }

    .option.correct {
      border-color: rgba(22, 163, 74, 0.9);
      background: var(--success-soft);
    }

    .option.incorrect {
      border-color: rgba(220, 38, 38, 0.95);
      background: var(--danger-soft);
    }

    .option.unselected-correct {
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.75) inset;
    }

    .explanation {
      font-size: 11px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(203, 213, 225, 0.9);
      background: var(--panel-bg);
      color: var(--text-soft);
      margin-top: 4px;
    }

    .explanation strong {
      color: var(--text);
    }

    .message {
      font-size: 11px;
      margin-top: 3px;
      color: #b45309;
    }

    .nav-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 4px;
    }

    .nav-row.second {
      justify-content: flex-end;
      margin-top: 3px;
      gap: 6px;
    }

    button {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      font-size: 12px;
      padding: 7px 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #ffffff;
      color: var(--text);
      border: 1px solid rgba(203, 213, 225, 0.9);
      transition: background 0.15s ease, transform 0.1s ease,
        box-shadow 0.15s ease, border-color 0.15s ease;
    }

    button:hover {
      background: rgba(239, 246, 255, 0.9);
      border-color: var(--accent-border);
      box-shadow: 0 10px 22px rgba(148, 163, 184, 0.4);
      transform: translateY(-0.5px);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 4px 10px rgba(148, 163, 184, 0.4);
    }

    button.primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      border-color: rgba(37, 99, 235, 0.9);
      color: #f9fafb;
      box-shadow: 0 12px 24px rgba(37, 99, 235, 0.5);
    }

    button.primary:hover {
      background: linear-gradient(135deg, #1d4ed8, #1e40af);
    }

    button.small {
      padding: 5px 10px;
      font-size: 11px;
    }

    button:disabled {
      opacity: 0.4;
      cursor: default;
      transform: none;
      box-shadow: none;
      background: #f9fafb;
    }

    /* Lösungs-Overlay */

    .solution-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(4px);
      z-index: 50;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 16px;
      overflow-y: auto;
    }

    .solution-panel {
      width: 100%;
      max-width: 980px;
      background: #ffffff;
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.7);
      padding: 14px 16px 16px;
    }

    .solution-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 8px;
    }

    .solution-header h2 {
      margin: 0;
      font-size: 16px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #1d4ed8;
    }

    .solution-summary {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 8px;
    }

    .solution-summary b {
      color: var(--text);
    }

    .solution-list {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: calc(100vh - 140px);
      overflow-y: auto;
      padding-right: 4px;
    }

    .solution-question {
      border-radius: 14px;
      border: 1px solid rgba(203, 213, 225, 0.9);
      background: #f9fafb;
      padding: 8px 9px 9px;
      font-size: 12px;
    }

    .solution-q-header {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 3px;
      align-items: baseline;
    }

    .solution-q-title {
      font-size: 12px;
      font-weight: 600;
    }

    .solution-q-topic {
      font-size: 11px;
      color: var(--text-soft);
      text-align: right;
    }

    .solution-q-score {
      font-size: 11px;
      color: var(--text);
      margin-top: 2px;
    }

    .solution-q-score.positive {
      color: var(--success);
    }

    .solution-q-score.negative {
      color: var(--danger);
    }

    .solution-options {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .solution-opt {
      display: flex;
      align-items: flex-start;
      gap: 6px;
      font-size: 12px;
    }

    .solution-opt-mark {
      width: 18px;
      text-align: center;
      font-size: 11px;
    }

    .opt-correct {
      color: var(--success);
    }

    .opt-wrong-selected {
      color: var(--danger);
    }

    .opt-neutral {
      color: var(--text-soft);
    }

    .solution-expl {
      margin-top: 4px;
      font-size: 11px;
      color: var(--text-soft);
    }

    /* Responsiv */

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }

      .info-column {
        order: -1;
      }
    }

    @media (max-width: 720px) {
      body {
        padding: 10px;
      }

      .app {
        padding: 14px 12px 16px;
        border-radius: 18px;
      }

      .app-title {
        font-size: 19px;
      }

      .quiz-header-bar {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="title-row">
        <div class="app-title">
          <span>Rechtsgrundlagen – Prüfungsquiz</span>
        </div>
        <div class="tag-pill">
          ÖR · Privatrecht · Grundbuch · Gewährleistung/Haftung
        </div>
      </div>
      <p class="subtitle">
        Mehrfachauswahl wie in der Prüfung: <b>mindestens eine Antwort ist richtig, aber nie alle</b>.
        Falsche Kreuze ziehen Punkte ab. Bewertung: ab <b>60&nbsp;%</b> insgesamt positiv.
      </p>
      <div class="mode-info-row">
        <span><strong>Scoring:</strong> richtige Antworten +, falsche −, gewichtet nach Anzahl der richtigen Lösungen (max. 100&nbsp;% pro Frage, min. 0&nbsp;%).</span>
      </div>
    </header>

    <main id="quiz-main">
      <div class="quiz-header-bar">
        <div class="mode-pill-current">
          Rechtsgrundlagen · Gesamt-Quiz
        </div>
        <div class="quiz-actions">
          <button id="restart-btn" class="small">Test neu starten</button>
          <button id="reshuffle-btn" class="small">Fragen neu mischen</button>
        </div>
      </div>

      <div class="layout">
        <section class="info-column">
          <div id="progress-info" class="info-card">
            <h3>Fortschritt</h3>
            <div class="info-grid">
              <div class="info-item">
                <div class="info-item-label">Aktuelle Frage</div>
                <div class="info-item-value" id="info-current-question">–</div>
              </div>
              <div class="info-item">
                <div class="info-item-label">Insgesamt</div>
                <div class="info-item-value" id="info-total-questions">–</div>
              </div>
              <div class="info-item">
                <div class="info-item-label">Beantwortet</div>
                <div class="info-item-value" id="info-answered">–</div>
              </div>
            </div>
            <div class="info-small">
              Du kannst zwischen den Fragen springen; deine Auswahl bleibt erhalten, bis du neu startest.
            </div>
          </div>

          <div id="score-banner" class="score-banner hidden">
            <div class="score-main">
              <span class="score-percent" id="score-percent">0&nbsp;%</span>
              <span class="score-grade" id="score-grade">Note –</span>
            </div>
            <div class="score-details" id="score-details">
              Noch keine Gesamtauswertung.
            </div>
          </div>
        </section>

        <section class="question-column">
          <div id="question-nav" class="question-nav"></div>
          <div id="question-container"></div>

          <div class="nav-row">
            <button id="prev-btn" type="button">◀ Zurück</button>
            <button id="check-btn" type="button" class="primary">Antwort prüfen</button>
            <button id="next-btn" type="button">Weiter ▶</button>
          </div>
          <div class="nav-row second">
            <button id="eval-btn" type="button" class="primary">
              Gesamtes Quiz auswerten
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- LÖSUNGEN / GESAMTAUSWERTUNG -->
    <div id="solution-overlay" class="solution-overlay hidden">
      <div class="solution-panel">
        <div class="solution-header">
          <h2>Gesamtauswertung &amp; Lösungen</h2>
          <button id="close-solution-btn" class="small">Schließen ✕</button>
        </div>
        <div id="solution-summary" class="solution-summary"></div>
        <div id="solution-list" class="solution-list"></div>
      </div>
    </div>
  </div>

  <script>
    // ==========================
    // Rohdaten – 130 Basisfragen
    // ==========================
    const RAW_QUESTIONS = [
      { "id": 1, "tag": "ÖR", "q": "Welche Staatsgewalten sieht die österreichische Bundesverfassung vor?", "type": "mc", "choices": [ "Legislative, Exekutive, Judikative", "Legislative, Exekutive, Verwaltung", "Bundesrat, Nationalrat, Bundesregierung", "Bundespräsident, Nationalrat, Bundesrat" ], "correct": [ 0 ], "a": "Legislative erlässt Gesetze; Exekutive vollzieht; Judikative entscheidet." },
      { "id": 2, "tag": "ÖR", "q": "Welche Organe gehören der Legislative an? (Wählen Sie zwei)", "type": "mc", "choices": [ "Nationalrat", "Bundesrat", "Bundespräsident", "VfGH" ], "correct": [ 0, 1 ] },
      { "id": 3, "tag": "ÖR", "q": "Welche Normen stehen im Stufenbau über Verordnungen?", "type": "mc", "choices": [ "Verfassung und einfache Gesetze", "Nur Verordnungen", "Bescheide", "Rechtsmeinungen" ], "correct": [ 0 ] },
      { "id": 4, "tag": "ÖR", "q": "Was ist eine individuelle Rechtsnorm?", "type": "mc", "choices": [ "Bescheid", "Verordnung", "Gesetz", "Richtlinie" ], "correct": [ 0 ] },
      { "id": 5, "tag": "ÖR", "q": "Welche Elemente muss ein Bescheid enthalten?", "type": "mc", "choices": [ "Spruch, Begründung, Rechtsmittelbelehrung", "Nur Spruch", "Nur Begründung", "Nur Unterschrift" ], "correct": [ 0 ] },
      { "id": 6, "tag": "ÖR", "q": "Wann gilt ein Bescheid als zugestellt?", "type": "mc", "choices": [ "Wenn er in den Machtbereich des Empfängers gelangt", "Bei persönlicher Übergabe erst", "Mit Veröffentlichung im Amtsblatt", "Bei Hinterlegung beim Nachbarn" ], "correct": [ 0 ] },
      { "id": 7, "tag": "ÖR", "q": "Welche Zustellart erlaubt Ersatzempfang?", "type": "mc", "choices": [ "RSb-Brief", "RSa-Brief", "Hinterlegung", "Einschreiben" ], "correct": [ 0 ] },
      { "id": 8, "tag": "ÖR", "q": "Welche Rechtsmittel sind gegen einen Verwaltungsbescheid möglich?", "type": "mc", "choices": [ "Beschwerde, Wiederaufnahme, Wiedereinsetzung", "Revision an OGH", "Klage beim EuGH", "Nichtigkeitsklage beim VfGH" ], "correct": [ 0 ] },
      { "id": 9, "tag": "ÖR", "q": "Welche Behörde ist in Wien primär für Baurecht zuständig?", "type": "mc", "choices": [ "MA 37", "MA 48", "MA 20", "MA 6" ], "correct": [ 0 ] },
      { "id": 10, "tag": "ÖR", "q": "Was regelt der Flächenwidmungsplan?", "type": "mc", "choices": [ "Nutzung und Widmung von Flächen", "Eigentumsverhältnisse", "Mietverhältnisse", "Steuerfragen" ], "correct": [ 0 ] },
      { "id": 11, "tag": "ÖR", "q": "Welche Instanz entscheidet über Verfassungswidrigkeit?", "type": "mc", "choices": [ "VfGH", "OGH", "VwGH", "Verwaltungsbehörde" ], "correct": [ 0 ] },
      { "id": 12, "tag": "EU", "q": "Was bedeutet Anwendungsvorrang des EU-Rechts?", "type": "mc", "choices": [ "EU-Recht geht nationalem Recht vor", "Nationales Recht geht vor", "Beide gelten gleich", "EuGH entscheidet nur" ], "correct": [ 0 ] },
      { "id": 13, "tag": "EU", "q": "Welches Organ ist Teil der Gesetzgebung der EU?", "type": "mc", "choices": [ "Europäisches Parlament", "EuGH", "Rechnungshof", "Rat der Regionen" ], "correct": [ 0 ] },
      { "id": 14, "tag": "GB", "q": "Was steht typischerweise im A-Blatt des Grundbuchs?", "type": "mc", "choices": [ "Einlagezahl, Widmung, Flächenangaben", "Eigentümer", "Hypotheken", "Dienstbarkeiten" ], "correct": [ 0 ] },
      { "id": 15, "tag": "GB", "q": "Welche Eintragungen finden sich im C-Blatt?", "type": "mc", "choices": [ "Hypotheken, Reallasten, Dienstbarkeiten", "Widmungen", "Einlagezahl", "Eigentümer" ], "correct": [ 0 ] },
      { "id": 16, "tag": "PR", "q": "Welche Frist gilt bei beweglichen Sachen für Gewährleistung?", "type": "mc", "choices": [ "2 Jahre", "1 Jahr", "5 Jahre", "6 Monate" ], "correct": [ 0 ] },
      { "id": 17, "tag": "PR", "q": "Welche Frist gilt für Baumängel typischerweise?", "type": "mc", "choices": [ "3 Jahre", "6 Monate", "1 Jahr", "10 Jahre" ], "correct": [ 0 ] },
      { "id": 18, "tag": "PR", "q": "Was ist Eigentumsvorbehalt?", "type": "mc", "choices": [ "Eigentum geht erst mit vollständiger Zahlung über", "Eigentum bleibt immer beim Käufer", "Hypothek", "Dienstbarkeit" ], "correct": [ 0 ] },
      { "id": 19, "tag": "PR", "q": "Welche Rechtsfolge hat die Einverleibung?", "type": "mc", "choices": [ "Dinglicher Rechtserwerb wird wirksam", "Nur deklarative Wirkung", "Keine Wirkung", "Nur informativ" ], "correct": [ 0 ] },
      { "id": 20, "tag": "PR", "q": "Welche Rechte stehen dem Käufer bei Mangel zu? (Mehrfachwahl)", "type": "mc", "choices": [ "Nacherfüllung", "Austausch", "Preisminderung", "Wandlung" ], "correct": [ 0, 1, 2, 3 ] },
      { "id": 21, "tag": "HAFT", "q": "Welche Voraussetzungen sind für deliktischen Schadenersatz erforderlich?", "type": "mc", "choices": [ "Schaden, Kausalität, Rechtswidrigkeit, Verschulden", "Nur Schaden", "Nur Verschulden", "Nur Kausalität" ], "correct": [ 0 ] },
      { "id": 22, "tag": "HAFT", "q": "Was beschreibt Mitverschulden?", "type": "mc", "choices": [ "Mitwirkung des Geschädigten, Kürzung des Anspruchs", "Erhöhung des Anspruchs", "Keine Auswirkung", "Automatische Haftung" ], "correct": [ 0 ] },
      { "id": 23, "tag": "PHG", "q": "Welche Schäden deckt das Produkthaftungsgesetz?", "type": "mc", "choices": [ "Personenschäden und Sachschäden an privaten Sachen", "Reine Vermögensschäden", "Nur Sachschäden", "Nur Personenschäden" ], "correct": [ 0 ] },
      { "id": 24, "tag": "PHG", "q": "Wer kann als Hersteller gelten?", "type": "mc", "choices": [ "Hersteller, Importeur, Quasihersteller", "Nur der Händler", "Nur der Zulieferer", "Nur der Verkäufer" ], "correct": [ 0 ] },
      { "id": 25, "tag": "AGB", "q": "Wann ist eine AGB-Klausel nach §879 ABGB nichtig?", "type": "mc", "choices": [ "Bei überraschender oder gröblich benachteiligender Regelung", "Bei langer Formulierung", "Bei handschriftlicher Klausel", "Nie" ], "correct": [ 0 ] },
      { "id": 26, "tag": "KSG", "q": "Wann gilt das 14-tägige Widerrufsrecht?", "type": "mc", "choices": [ "Bei Fernabsatz und Haustürgeschäften", "Beim Kauf im Laden", "Bei Schenkungen", "Bei notariellen Verträgen" ], "correct": [ 0 ] },
      { "id": 27, "tag": "KOST", "q": "Was ist ein verbindlicher Kostenvoranschlag?", "type": "mc", "choices": [ "Ein vertraglich bindender Preis, Überschreitung nur mit Zustimmung", "Unverbindliche Schätzung", "Nur Richtwert", "Nur intern" ], "correct": [ 0 ] },
      { "id": 28, "tag": "ARB", "q": "Welche Stellen sind bei Arbeitsunfall relevant?", "type": "mc", "choices": [ "AUVA, Arbeitsinspektorat, Bezirksbehörde", "OGH, VfGH", "EuGH", "Polizei allein" ], "correct": [ 0 ] },
      { "id": 29, "tag": "VStG", "q": "Welche Rolle hat ein Verantwortlicher nach VStG?", "type": "mc", "choices": [ "Haftung für Verwaltungsübertretungen der Organisation", "Keine Rolle", "Strafrechtliche Verantwortung", "Nur interne Funktion" ], "correct": [ 0 ] },
      { "id": 30, "tag": "VfGH", "q": "Wofür ist der VfGH zuständig?", "type": "mc", "choices": [ "Verfassungsgerichtsbarkeit, Normenkontrolle", "Zivilrechtliche Revision", "Verwaltungsaufsicht", "Europarecht" ], "correct": [ 0 ] },
      { "id": 31, "tag": "VwGH", "q": "Welche Funktion hat der VwGH?", "type": "mc", "choices": [ "Überprüfung verwaltungsgerichtlicher Entscheidungen", "OGH-ähnliche Aufgaben", "VfGH-Funktionen", "EuGH-Funktionen" ], "correct": [ 0 ] },
      { "id": 32, "tag": "OGH", "q": "Welche Aufgabe hat der OGH?", "type": "mc", "choices": [ "Rechtsfortbildung in Zivil- und Strafrecht", "Baurechtsaufsicht", "Verwaltungsrechtsprechung", "Europäische Gesetzgebung" ], "correct": [ 0 ] },
      { "id": 33, "tag": "BO", "q": "Welche Maßnahme kann die Baupolizei ergreifen?", "type": "mc", "choices": [ "Baueinstellung, Sicherungsmaßnahmen, Beseitigungsauftrag", "Nur Beratung", "Nur Geldstrafe", "Nichts" ], "correct": [ 0 ] },
      { "id": 34, "tag": "BO", "q": "Welche Unterlagen gehören typischerweise zu einem Bauantrag?", "type": "mc", "choices": [ "Baupläne, Lageplan, Baubeschreibung, statische Nachweise", "Nur schriftlicher Antrag", "Nur Unterschrift", "Nur Kostenvoranschlag" ], "correct": [ 0 ] },
      { "id": 35, "tag": "GB", "q": "Was schützt die Vormerkung im Grundbuch?", "type": "mc", "choices": [ "Künftige Rechte und deren Rang", "Eigentumserwerb sofort", "Hypothek", "Dienstbarkeit" ], "correct": [ 0 ] },
      { "id": 36, "tag": "GB", "q": "Was ist die Wirkung einer Löschung einer Hypothek?", "type": "mc", "choices": [ "Die Belastung erlischt", "Eigentum geht verloren", "Grund wird unbeleihbar", "Nichts passiert" ], "correct": [ 0 ] },
      { "id": 37, "tag": "PR", "q": "Was regelt das Rangprinzip?", "type": "mc", "choices": [ "Priorität der Rechte nach Eintragungszeitpunkt", "Größe des Grundstücks", "Baurechte", "Steuern" ], "correct": [ 0 ] },
      { "id": 38, "tag": "PR", "q": "Welche Rechte sichert der Eigentumsvorbehalt?", "type": "mc", "choices": [ "Eigentum bis zur Zahlung", "Nutzungsrechte", "Dienstbarkeiten", "Hypotheken" ], "correct": [ 0 ] },
      { "id": 39, "tag": "PR", "q": "Was ist Ersitzung (Grundsatz)?", "type": "mc", "choices": [ "Erwerb durch längeren Besitz nach gesetzlicher Frist", "Schenkung", "Hypothek", "Vormerkung" ], "correct": [ 0 ] },
      { "id": 40, "tag": "PR", "q": "Welche Beweislastregel gilt bei Mängeln in den ersten 6 Monaten?", "type": "mc", "choices": [ "Mangel wird zu Gunsten des Käufers vermutet", "Verkäufer muss nichts beweisen", "Käufer trägt immer die Beweislast", "Keine Regel" ], "correct": [ 0 ] },
      { "id": 41, "tag": "HAFT", "q": "Was ist der Unterschied zwischen vertraglicher und deliktischer Haftung?", "type": "mc", "choices": [ "Vertraglich aus Pflichtverletzung, deliktisch aus unerlaubter Handlung", "Keine Unterschiede", "Beides sind Delikte", "Nur deliktisch wichtig" ], "correct": [ 0 ] },
      { "id": 42, "tag": "HAFT", "q": "Was regelt §1313a ABGB?", "type": "mc", "choices": [ "Haftung des Schuldners für Erfüllungsgehilfen", "Haftung für Produkte", "Verbraucherschutz", "Mietrecht" ], "correct": [ 0 ] },
      { "id": 43, "tag": "HAFT", "q": "Wann greift Gefährdungshaftung?", "type": "mc", "choices": [ "Bei besonders gefährlichen Tätigkeiten (z. B. Kfz, Bauwerke)", "Nie", "Nur bei Vertrag", "Nur bei Vorsatz" ], "correct": [ 0 ] },
      { "id": 44, "tag": "PHG", "q": "Welche Frist gilt im Produkthaftungsrecht (Kenntnis/absolute)?", "type": "mc", "choices": [ "3 Jahre ab Kenntnis, max. 10 Jahre ab Inverkehrbringen", "1 Jahr", "5 Jahre", "Keine Frist" ], "correct": [ 0 ] },
      { "id": 45, "tag": "AGB", "q": "Welche Klauseln sind im Verbraucherschutz typischerweise unwirksam?", "type": "mc", "choices": [ "Haftungsausschlüsse für Personenschäden, grob benachteiligende Klauseln", "Alles ist wirksam", "Nur Preisangaben", "Nur Lieferfristen" ], "correct": [ 0 ] },
      { "id": 46, "tag": "KSG", "q": "Welche Informationspflichten bestehen bei Verbraucherverträgen?", "type": "mc", "choices": [ "Pflichten zu Produktinfo, Preis, Widerruf", "Keine Pflichten", "Nur Lieferpflicht", "Nur Rechnungspflicht" ], "correct": [ 0 ] },
      { "id": 47, "tag": "KOST", "q": "Wann muss ein Unternehmer Überschreitungen eines Kostenvoranschlags melden?", "type": "mc", "choices": [ "Unverzüglich beim Erkennen", "Nie", "Bei Rechnungslegung", "Nur bei Bauwerken" ], "correct": [ 0 ] },
      { "id": 48, "tag": "ARB", "q": "Wann liegt ein Arbeitsunfall vor?", "type": "mc", "choices": [ "Bei Unfall im Zusammenhang mit Arbeitstätigkeit, Arbeitsweg, Betriebshandlungen", "Nur bei tödlichem Ausgang", "Nur im Betrieb", "Nie" ], "correct": [ 0 ] },
      { "id": 49, "tag": "VStG", "q": "Was ist eine Verwaltungsübertretung?", "type": "mc", "choices": [ "Leichte bis mittlere Ordnungswidrigkeit des Verwaltungsrechts", "Strafbare Handlung", "Zivilrechtlicher Anspruch", "Technischer Begriff" ], "correct": [ 0 ] },
      { "id": 50, "tag": "ÖR", "q": "Was versteht man unter Parteistellung?", "type": "mc", "choices": [ "Recht einer Person, am Verfahren teilzunehmen", "Mitgliedschaft in Partei", "Öffentliche Stellung", "Beratungspflicht" ], "correct": [ 0 ] },
      { "id": 51, "tag": "EU", "q": "Was ist eine EU-Richtlinie?", "type": "mc", "choices": [ "Rechtsakt, der Mitgliedstaaten Ziel vorgibt und Umsetzung verlangt", "Unmittelbar anwendbar", "Nur Empfehlung", "Nur Leitfaden" ], "correct": [ 0 ] },
      { "id": 52, "tag": "VfGH", "q": "Welche Klageart gibt es beim VfGH?", "type": "mc", "choices": [ "Verfassungsbeschwerde, Organstreit, Normenkontrolle", "Zivilklage", "Strafklage", "Verwaltungsbeschwerde" ], "correct": [ 0 ] },
      { "id": 53, "tag": "OGH", "q": "Was ist Revision beim OGH?", "type": "mc", "choices": [ "Überprüfung rechtlicher Fragen aus Instanzurteilen", "Neubeurteilung des Sachverhalts", "Zustimmung zu Entscheidungen", "Appellationsverfahren" ], "correct": [ 0 ] },
      { "id": 54, "tag": "GB", "q": "Welche Funktion hat die Vormerkung im Grundbuch?", "type": "mc", "choices": [ "Sicherung künftiger dinglicher Rechte", "Sofortige Entscheidung", "Hypothek", "Baulast" ], "correct": [ 0 ] },
      { "id": 55, "tag": "PR", "q": "Welche Folgen hat der Annahmeverzug des Käufers?", "type": "mc", "choices": [ "Gefahr- und Kostenübergang zu Lasten des Käufers", "Käufer wird Eigentümer", "Keine Folgen", "Verkäufer haftet weiter" ], "correct": [ 0 ] },
      { "id": 56, "tag": "PR", "q": "Was bedeutet \"Wandlung\" im Gewährleistungsrecht?", "type": "mc", "choices": [ "Aufhebung des Kaufvertrags und Rückgewähr", "Nur Reparatur", "Nur Preisminderung", "Nur Schadensersatz" ], "correct": [ 0 ] },
      { "id": 57, "tag": "HAFT", "q": "Was ist Vertrauensschaden (c.i.c.)?", "type": "mc", "choices": [ "Schaden durch berechtigtes Vertrauen in das Zustandekommen eines Vertrags", "Nur Vermögensschaden", "Nur Personenschaden", "Nur Sachschaden" ], "correct": [ 0 ] },
      { "id": 58, "tag": "PHG", "q": "Welcher Selbstbehalt gilt bei Sachschäden im PHG?", "type": "mc", "choices": [ "500 €", "0 €", "100 €", "1.000 €" ], "correct": [ 0 ] },
      { "id": 59, "tag": "AGB", "q": "Welche Vorschrift schützt gegen unfaire/benachteiligende Klauseln im ABGB?", "type": "mc", "choices": [ "§ 879 ABGB", "§ 1313a ABGB", "§ 6 KSchG", "§ 1 VwVfG" ], "correct": [ 0 ] },
      { "id": 60, "tag": "KSG", "q": "Wer ist Konsument im KSchG?", "type": "mc", "choices": [ "Natürliche Person, die Rechtsgeschäft zu privaten Zwecken abschließt", "Unternehmer", "Verein", "Behörde" ], "correct": [ 0 ] },
      { "id": 61, "tag": "KOST", "q": "Was ist der Unterschied verbindlich/unverbindlich bei Kostenvoranschlag?", "type": "mc", "choices": [ "Verbindlich bindet Preis; unverbindlich ist Schätzung", "Keine Unterschiede", "Nur bei Bauanträgen", "Nur bei Verträgen" ], "correct": [ 0 ] },
      { "id": 62, "tag": "ARB", "q": "Welche Rolle hat die AUVA?", "type": "mc", "choices": [ "Unfallversicherungsträger für Arbeitsunfälle und Berufskrankheiten", "Gericht", "Behörde", "Gewerkschaft" ], "correct": [ 0 ] },
      { "id": 63, "tag": "VStG", "q": "Welche Sanktionen drohen bei Verwaltungsübertretungen?", "type": "mc", "choices": [ "Verwaltungsstrafen, Geldstrafen, Sicherheitsleistungen", "Nur Freiheitsstrafe", "Nur Zivilklage", "Keine Sanktionen" ], "correct": [ 0 ] },
      { "id": 64, "tag": "ÖR", "q": "Was ist eine BVE (Beschwerdevorentscheidung)?", "type": "mc", "choices": [ "Vorentscheidung der Behörde über Beschwerde vor Vorlage an Gericht", "Endgültige Entscheidung des Gerichts", "Bericht des Rechnungshofs", "Nur interner Akt" ], "correct": [ 0 ] },
      { "id": 65, "tag": "EU", "q": "Was ist der EuGH?", "type": "mc", "choices": [ "Gerichtshof der Europäischen Union, zuständig für Auslegung des EU-Rechts", "Parlament", "Kommission", "Rechnungshof" ], "correct": [ 0 ] },
      { "id": 66, "tag": "OGH", "q": "Welche Wirkung haben OGH-Präjudizien?", "type": "mc", "choices": [ "Richtungsweisend für die Rechtsfortbildung", "Bindend wie Gesetze", "Keine Wirkung", "Nur historisch relevant" ], "correct": [ 0 ] },
      { "id": 67, "tag": "GB", "q": "Welche Rolle hat das B- Blatt?", "type": "mc", "choices": [ "Eigentümer- und Erwerbsdaten", "Pfandrechte", "Widmungen", "Dienstbarkeiten" ], "correct": [ 0 ] },
      { "id": 68, "tag": "PR", "q": "Was ist eine Höchstbetragshypothek?", "type": "mc", "choices": [ "Hypothek zur Sicherung mehrerer Forderungen bis zu Höchstbetrag", "Hypothek mit variablen Zinsen", "Nur bei Grundbuchstrafen", "Ungebräuchlich" ], "correct": [ 0 ] },
      { "id": 69, "tag": "HAFT", "q": "Welche Komponenten gehören zu einem Schadenersatzanspruch?", "type": "mc", "choices": [ "Schaden, Kausalität, Rechtswidrigkeit, Verschulden", "Nur Schaden", "Nur Kausalität", "Nur Verschulden" ], "correct": [ 0 ] },
      { "id": 70, "tag": "PHG", "q": "Wer haftet bei Produktmängeln gegenüber Verbrauchern?", "type": "mc", "choices": [ "Hersteller und Importeur", "Nur Händler", "Nur Verkäufer", "Nur Händler und Verkäufer" ], "correct": [ 0 ] },
      { "id": 71, "tag": "AGB", "q": "Wann wird eine AGB-Klausel einbezogen?", "type": "mc", "choices": [ "Hinweis, Zumutbare Kenntnisnahme, Zustimmung des Vertragspartners", "Nur wenn handschriftlich", "Nie", "Automatisch" ], "correct": [ 0 ] },
      { "id": 72, "tag": "KSG", "q": "Welche Schutzwirkung hat das KSchG?", "type": "mc", "choices": [ "Besondere Schutzvorschriften zugunsten des Konsumenten", "Keine spezielle Wirkung", "Nur steuerliche Wirkung", "Nur arbeitsrechtlich relevant" ], "correct": [ 0 ] },
      { "id": 73, "tag": "KOST", "q": "Welche Pflicht hat der Unternehmer bei Mehrkosten?", "type": "mc", "choices": [ "Unverzügliche Mitteilung an den Auftraggeber", "Keine Pflicht", "Nur schriftliche Abrechnung", "Nur am Ende" ], "correct": [ 0 ] },
      { "id": 74, "tag": "ARB", "q": "Welche Folgen hat grobe Fahrlässigkeit des Arbeitgebers?", "type": "mc", "choices": [ "Haftung des Arbeitgebers, ev. Strafverfahren", "Keine Folgen", "Nur Verwarnung", "Nur innerbetriebliche Sanktion" ], "correct": [ 0 ] },
      { "id": 75, "tag": "VStG", "q": "Wann ist ein Verantwortlicher anzuführen?", "type": "mc", "choices": [ "Wenn die Organisation eine benannte verantwortliche Person festlegen will", "Nie", "Nur bei Strafverfahren", "Nur im Zivilrecht" ], "correct": [ 0 ] },
      { "id": 76, "tag": "ÖR", "q": "Was ist das Legalitätsprinzip?", "type": "mc", "choices": [ "Verwaltung darf nur auf gesetzlicher Grundlage handeln", "Verwaltung handelt frei", "Gerichte schreiben Gesetze", "Keine Bedeutung" ], "correct": [ 0 ] },
      { "id": 77, "tag": "EU", "q": "Welche Rechtsakte sind unmittelbar anwendbar?", "type": "mc", "choices": [ "Verordnungen", "Richtlinien", "Empfehlungen", "Leitlinien" ], "correct": [ 0 ] },
      { "id": 78, "tag": "OGH", "q": "Wann ist ein Revisionsrekurs zum OGH zulässig?", "type": "mc", "choices": [ "Wenn Rechtsfragen von grundsätzlicher Bedeutung betroffen sind", "Immer", "Nie", "Nur bei Strafsachen" ], "correct": [ 0 ] },
      { "id": 79, "tag": "GB", "q": "Welche Wirkung hat eine Vormerkung bei einem Drittankauf?", "type": "mc", "choices": [ "Sichert Rang und verhindert Nachrang", "Keine Wirkung", "Löscht Hypothek", "Erhöht Steuerlast" ], "correct": [ 0 ] },
      { "id": 80, "tag": "PR", "q": "Welche Prüfungsfrage zu Mängelrügen ist typisch?", "type": "mc", "choices": [ "Rügefrist, Fristsetzung zur Mangelbeseitigung, Rechtsfolgen", "Nur Preisvergleich", "Nur Eigentumsfragen", "Nur Grundbuchfragen" ], "correct": [ 0 ] },
      { "id": 81, "tag": "HAFT", "q": "Wann besteht Haftung ohne Verschulden?", "type": "mc", "choices": [ "Gefährdungshaftung und Produkthaftung", "Nie", "Nur bei Vertrag", "Nur bei Vorsatz" ], "correct": [ 0 ] },
      { "id": 82, "tag": "PHG", "q": "Welche Voraussetzung ist für PHG-Anspruch nicht erforderlich?", "type": "mc", "choices": [ "Verschulden des Herstellers", "Fehler des Produkts", "Schaden", "Kausalität" ], "correct": [ 0 ] },
      { "id": 83, "tag": "AGB", "q": "Welche Kontrollart prüft die Inhaltsneutralität von AGB?", "type": "mc", "choices": [ "Inhaltskontrolle (grob benachteiligend) ", "Formelle Kontrolle", "Nur Preisprüfung", "Nur Sprache" ], "correct": [ 0 ] },
      { "id": 84, "tag": "KSG", "q": "Welche Rechtsfolge hat die Nichtinformation über Widerrufsrechte?", "type": "mc", "choices": [ "Verlängerung der Widerrufsfrist", "Keine Folge", "Nur Bußgeld", "Nichtigkeit des Vertrags" ], "correct": [ 0 ] },
      { "id": 85, "tag": "KOST", "q": "Was ist ein Fixpreis?", "type": "mc", "choices": [ "Verbindlicher Endpreis unabhängig von Aufwand", "Schätzung", "Unverbindliche Angabe", "Nur intern" ], "correct": [ 0 ] },
      { "id": 86, "tag": "ARB", "q": "Wer trägt primär den Versicherungsschutz bei Arbeitsunfällen?", "type": "mc", "choices": [ "Unfallversicherungsträger (z. B. AUVA)", "Arbeitgeber direkt", "Staat", "Polizei" ], "correct": [ 0 ] },
      { "id": 87, "tag": "VStG", "q": "Welche Rolle spielen Sicherheitsleistungen?", "type": "mc", "choices": [ "Vorsorgemaßnahme in Verwaltungsverfahren", "Keine Rolle", "Nur Zivilverfahren", "Nur bei Strafprozessen" ], "correct": [ 0 ] },
      { "id": 88, "tag": "ÖR", "q": "Was ist Parteistellung im Bauverfahren?", "type": "mc", "choices": [ "Recht, Einwendungen zu erheben und Akteneinsicht zu nehmen", "Nur Informationsrechte", "Automatisch für alle Anrainer", "Keine Bedeutung" ], "correct": [ 0 ] },
      { "id": 89, "tag": "EU", "q": "Was macht die Europäische Kommission?", "type": "mc", "choices": [ "Initiativrecht für EU-Rechtsakte und Überwachung der Verträge", "Rechtsprechung", "Haushaltskontrolle", "Parlamentarische Arbeit" ], "correct": [ 0 ] },
      { "id": 90, "tag": "OGH", "q": "Welche Bedeutung hat die Judikatur für die Klausurpraxis?", "type": "mc", "choices": [ "Erkenntnisleitend und praxisrelevant für Falllösungen", "Unwichtig", "Nur historisch", "Nur theoretisch" ], "correct": [ 0 ] },
      { "id": 91, "tag": "GB", "q": "Welche Prüfungspunkte hat ein Grundbuchsantrag?", "type": "mc", "choices": [ "Vormerkung, Einverleibung, Richtigkeit der Unterlagen", "Nur Zahlung", "Nur Adresse", "Nur Unterschrift" ], "correct": [ 0 ] },
      { "id": 92, "tag": "PR", "q": "Welche Frist gilt für Regelverjährung?", "type": "mc", "choices": [ "3 Jahre", "1 Jahr", "10 Jahre", "30 Jahre" ], "correct": [ 0 ] },
      { "id": 93, "tag": "HAFT", "q": "Welche Folgen hat ein Schutzgesetzverstoß?", "type": "mc", "choices": [ "Haftung bei Eintritt des geschützten Schadens", "Keine Folgen", "Nur Bußgeld", "Nur intern" ], "correct": [ 0 ] },
      { "id": 94, "tag": "PHG", "q": "Welche Schäden sind ausgeschlossen?", "type": "mc", "choices": [ "Reine Vermögensschäden sind regelmäßig ausgeschlossen", "Personenschäden", "Sachschäden", "Immaterielle Schäden" ], "correct": [ 0 ] },
      { "id": 95, "tag": "AGB", "q": "Was muss vor Einbeziehung von AGB geschehen?", "type": "mc", "choices": [ "Hinweis und zumutbare Kenntnisnahme ermöglichen", "Nichts", "Nur Unterschrift", "Nur mündliche Vereinbarung" ], "correct": [ 0 ] },
      { "id": 96, "tag": "KSG", "q": "Welche Rolle hat der Verbraucherschutz bei Garantieversprechen?", "type": "mc", "choices": [ "Garantiehinweise dürfen Gewährleistungsrechte nicht einschränken", "Garantie ist immer gleichbedeutend mit Gewährleistung", "Garantie ist verboten", "Keine Rolle" ], "correct": [ 0 ] },
      { "id": 97, "tag": "KOST", "q": "Welche Elemente sollten in einem verbindlichen Kostenvoranschlag stehen?", "type": "mc", "choices": [ "Leistungsumfang, Preis, Laufzeit, Bedingungen für Mehrkosten", "Nur Preis", "Nur Datum", "Nur Unterschrift" ], "correct": [ 0 ] },
      { "id": 98, "tag": "ARB", "q": "Was bedeutet Haftungsprivileg des Arbeitgebers?", "type": "mc", "choices": [ "Versicherung übernimmt viele Schäden, Arbeitgeber haftet nur bei grober Fahrlässigkeit", "Arbeitgeber haftet immer", "Arbeitgeber haftet nie", "Nur bei Vertrag relevant" ], "correct": [ 0 ] },
      { "id": 99, "tag": "VStG", "q": "Welche Beweismittel sind in Verwaltungsverfahren relevant?", "type": "mc", "choices": [ "Schriftstücke, Zeugenaussagen, Gutachten", "Nur Zeugenaussagen", "Nur Gutachten", "Nur elektronische Akten" ], "correct": [ 0 ] },
      { "id": 100, "tag": "ÖR", "q": "Welche Pflichten hat die Behörde bei Amtsermittlung?", "type": "mc", "choices": [ "Materielle Wahrheitspflicht, vollständige Sachverhaltsfeststellung", "Keine Pflichten", "Nur formelle Prüfung", "Nur Fristen beachten" ], "correct": [ 0 ] },
      { "id": 101, "tag": "EU", "q": "Wann ist Vorabentscheidung an EuGH zu richten?", "type": "mc", "choices": [ "Wenn Rechtsauslegung des Unionsrechts zur Entscheidung nötig ist", "Immer", "Nie", "Nur bei Verfassungsfragen" ], "correct": [ 0 ] },
      { "id": 102, "tag": "OGH", "q": "Was prüft der OGH in Zivilsachen primär?", "type": "mc", "choices": [ "Rechtliche Fehler in Tatsacheninstanzen", "Neubeurteilung des Sachverhalts", "Verwaltungsrecht", "Strafrecht" ], "correct": [ 0 ] },
      { "id": 103, "tag": "GB", "q": "Welche Eintragung sichert den Rang?", "type": "mc", "choices": [ "Vormerkung", "Anmerkung", "Vermerk", "Notiz" ], "correct": [ 0 ] },
      { "id": 104, "tag": "PR", "q": "Welche Frage ist typisch in Altklausuren zur Zustellung?", "type": "mc", "choices": [ "Unterschied RSa vs RSb und Rechtsfolgen", "Wann endet das Studium?", "Hypothekenberechnung", "EU-Verordnungstext" ], "correct": [ 0 ] },
      { "id": 105, "tag": "HAFT", "q": "Was ist Erfüllungsinteresse?", "type": "mc", "choices": [ "Stellung des Gläubigers wie bei ordnungsgemäßer Vertragserfüllung", "Nur Schadenersatz", "Nur Rücktritt", "Nur AGB-Angelegenheit" ], "correct": [ 0 ] },
      { "id": 106, "tag": "PHG", "q": "Welche Rolle hat der Importeur?", "type": "mc", "choices": [ "Kann wie Hersteller haften, wenn er Produkt in Verkehr bringt", "Keine Rolle", "Nur Händler", "Nur Verkäufer" ], "correct": [ 0 ] },
      { "id": 107, "tag": "AGB", "q": "Was ist Überraschungsklausel?", "type": "mc", "choices": [ "Klausel, die Vertragspartner nicht erwarten und deshalb nicht einbezogen wird", "Klausel mit hoher Schriftgröße", "Klausel mit Preisangabe", "Klausel im Anhang" ], "correct": [ 0 ] },
      { "id": 108, "tag": "KSG", "q": "Welche Konsequenz hat missbräuchliche AGB-Klausel?", "type": "mc", "choices": [ "Nichtigkeit der Klausel", "Nichtigkeit des gesamten Vertrags", "Strafrechtliche Verfolgung", "Keine Konsequenz" ], "correct": [ 0 ] },
      { "id": 109, "tag": "KOST", "q": "Was ist der Unterschied zwischen Kostenvoranschlag und Angebot?", "type": "mc", "choices": [ "Angebot ist oft bindend; Voranschlag kann unverbindlich sein", "Kein Unterschied", "Voranschlag ist bindend", "Nur Begriffliche Abweichung" ], "correct": [ 0 ] },
      { "id": 110, "tag": "ARB", "q": "Welche Unterlagen sind bei Arbeitsunfall wichtig?", "type": "mc", "choices": [ "Unfallmeldung, Dienstzeugnisse, ärztliche Befunde", "Nur Polizeibericht", "Nur Zeugenaussage", "Nur Kostenaufstellung" ], "correct": [ 0 ] },
      { "id": 111, "tag": "VStG", "q": "Welche Voraussetzungen braucht es für eine Verantwortlichkeit der Organisation?", "type": "mc", "choices": [ "Benennung einer verantwortlichen Person und Organisationspflichten", "Nur Größe des Unternehmens", "Nur Gewinnorientierung", "Keine Voraussetzung" ], "correct": [ 0 ] },
      { "id": 112, "tag": "ÖR", "q": "Welche Prüfungsfrage zu Flächenwidmungsplan taucht häufig auf?", "type": "mc", "choices": [ "Beurteilung von Widmungsänderungen und Auswirkung auf Bauverfahren", "Hypothekenfrage", "Vertragsrecht", "Steuerrecht" ], "correct": [ 0 ] },
      { "id": 113, "tag": "EU", "q": "Welche Wirkung haben EU-Entscheidungen?", "type": "mc", "choices": [ "Verbindlich für Adressaten, meist Mitgliedstaaten", "Nur Empfehlung", "Nur intern", "Keine Wirkung" ], "correct": [ 0 ] },
      { "id": 114, "tag": "OGH", "q": "Welche Bedeutung hat die Revisionsrechtsprechung für Studenten?", "type": "mc", "choices": [ "Leitlinien für Fallbearbeitung und Rechtsauffassungen", "Keine Bedeutung", "Nur für Richter relevant", "Nur historisch" ], "correct": [ 0 ] },
      { "id": 115, "tag": "GB", "q": "Welche Prüfung ist bei Grundbuchänderung erforderlich?", "type": "mc", "choices": [ "Formelle Voraussetzungen, Einreichunterlagen, Zustimmung ggf.", "Nur Zahlung", "Nur Unterschrift", "Nur mündliche Zustimmung" ], "correct": [ 0 ] },
      { "id": 116, "tag": "PR", "q": "Welche Fallstruktur ist bei Gewährleistungsfällen üblich?", "type": "mc", "choices": [ "Mangel — Rüge — Fristsetzung — Rechtsfolgen", "Nur Klage", "Nur Rücktritt", "Nur Schadensersatz" ], "correct": [ 0 ] },
      { "id": 117, "tag": "HAFT", "q": "Welche Rolle spielt Adäquanz bei Kausalität?", "type": "mc", "choices": [ "Nur adäquate, typische Folgen sind ersatzfähig", "Jede Folge ist ersatzfähig", "Adäquanz irrelevant", "Nur bei Vertrag gültig" ], "correct": [ 0 ] },
      { "id": 118, "tag": "PHG", "q": "Welche Kenntnisse sind für PHG-Anspruch relevant?", "type": "mc", "choices": [ "Kenntnis des Schadenszeitpunkts und des Mangels", "Keine Kenntnisse nötig", "Nur Verkäuferkenntnis", "Nur Herstellerkenntnis" ], "correct": [ 0 ] },
      { "id": 119, "tag": "AGB", "q": "Welche Prüfung ist bei AGB-Inhaltskontrolle vorgesehen?", "type": "mc", "choices": [ "Ob Klausel gröblich benachteiligend ist", "Ob Klausel lang ist", "Ob Klausel handschriftlich ist", "Ob Klausel teuer ist" ], "correct": [ 0 ] },
      { "id": 120, "tag": "KSG", "q": "Welche Rechte hat Konsument bei Vertragsverletzung?", "type": "mc", "choices": [ "Widerruf, Schadenersatz, Preisminderung, Rücktritt je nach Fall", "Keine Rechte", "Nur Bußgeld", "Nur Vertragsstrafe" ], "correct": [ 0 ] },
      { "id": 121, "tag": "GB", "q": "Welche Wirkung hat eine Einverleibung im Grundbuch auf Dritte?", "type": "mc", "choices": [ "Dritte sind an die Eintragung gebunden und Rang ist gesichert", "Keine Wirkung", "Nur informativ", "Nur intern" ], "correct": [ 0 ] },
      { "id": 122, "tag": "BO", "q": "Welche Frist gilt für die Baubewilligungskommunikation (Beispiel)?", "type": "mc", "choices": [ "Variiert, oft Fristen nach Landesrecht (prüfungsrelevant: Fristeinhaltung)", "Immer 1 Woche", "Immer 6 Monate", "Keine Frist" ], "correct": [ 0 ] },
      { "id": 123, "tag": "PR", "q": "Welche Rolle spielt die Aufklärungspflicht vor Vertragsschluss?", "type": "mc", "choices": [ "Vertrauensbildung; Verletzung kann c.i.c.-Ansprüche begründen", "Keine Rolle", "Nur intern relevant", "Nur bei staatlichen Verträgen relevant" ], "correct": [ 0 ] },
      { "id": 124, "tag": "HAFT", "q": "Wie ist Mitverschulden prozentual zu berücksichtigen?", "type": "mc", "choices": [ "Kürzung des Ersatzanspruchs nach Quoten", "Vollständiger Wegfall", "Verdoppelung des Anspruchs", "Keine Berücksichtigung" ], "correct": [ 0 ] },
      { "id": 125, "tag": "PHG", "q": "Ist eine Produkthaftung verjährbar?", "type": "mc", "choices": [ "Ja — 3 Jahre ab Kenntnis, maximal 10 Jahre ab Inverkehrbringen", "Nein", "Nur 1 Jahr", "Nur 5 Jahre" ], "correct": [ 0 ] },
      { "id": 126, "tag": "AGB", "q": "Welche Schritte sind bei AGB-Einbeziehung zu dokumentieren?", "type": "mc", "choices": [ "Hinweis, Zugänglichmachung, Einverständnis", "Nur Hinweis", "Nur Übergabe", "Nichts" ], "correct": [ 0 ] },
      { "id": 127, "tag": "KSG", "q": "Welche Sanktionen bestehen bei Verstößen gegen Verbraucherschutzpflichten?", "type": "mc", "choices": [ "Geldstrafen, Unterlassungsansprüche, Schadenersatz", "Nur Verwarnung", "Nur Rücktritt", "Keine Sanktionen" ], "correct": [ 0 ] },
      { "id": 128, "tag": "KOST", "q": "Kann ein Kostenvoranschlag in einem Werkvertrag Bestandteil der Vergütung sein?", "type": "mc", "choices": [ "Ja, wenn ausdrücklich vereinbart (Fixpreis vs. Schätzung)", "Nein", "Nur bei Miete", "Nur bei Dienstvertrag" ], "correct": [ 0 ] },
      { "id": 129, "tag": "ARB", "q": "Welche Prüfungspunkte sind bei Arbeitsunfall-Fällen in Klausuren relevant?", "type": "mc", "choices": [ "Zuständigkeiten, Verschulden, Versicherungsdeckung, Schadensfolgen", "Nur Kosten", "Nur medizinische Aspekte", "Nur Verjährung" ], "correct": [ 0 ] },
      { "id": 130, "tag": "ÖR", "q": "Welche Prüfungsfrage zu Zustellung und Rechtsfolgen taucht häufig auf?", "type": "mc", "choices": [ "Unterschied RSa/RSb und rechtliche Wirkungen", "Wann ist ein Gesetz in Kraft?", "Wie wird ein Vertrag abgeschlossen?", "Welche Gebühren fallen an?" ], "correct": [ 0 ] }
    ];

    const TOPIC_LABELS = {
      "ÖR": "Öffentliches Recht",
      "EU": "Europarecht",
      "GB": "Grundbuch / Sachenrecht",
      "PR": "Privatrecht / Verträge",
      "HAFT": "Schadenersatz / Haftung",
      "PHG": "Produkthaftung (PHG)",
      "AGB": "AGB / Vertragsklauseln",
      "KSG": "Konsumentenschutz (KSchG)",
      "KOST": "Kostenvoranschlag / Werkvertragsrecht",
      "ARB": "Arbeitsrecht / Arbeitsunfall",
      "VStG": "Verwaltungsstrafgesetz (VStG)",
      "VfGH": "Verfassungsgerichtshof (VfGH)",
      "VwGH": "Verwaltungsgerichtshof (VwGH)",
      "OGH": "Oberster Gerichtshof (OGH)",
      "BO": "Bauordnung / Baurecht"
    };

    // Basisfragen aus RAW_QUESTIONS
    const BASE_QUESTIONS = RAW_QUESTIONS.map((item) => ({
      id: item.id,
      tag: item.tag,
      topic: TOPIC_LABELS[item.tag] || "",
      text: item.q,
      options: item.choices,
      correctIndices: item.correct,
      explanationNote: item.a || ""
    }));

    // ==========================
    // Zusätzliche Fall- / Vertiefungsfragen (IDs 131–158)
    // ==========================
    const EXTRA_QUESTIONS = [
      {
        id: 131,
        tag: "ÖR",
        topic: "Normensystem: Grundstückskauf & Bau",
        text: "Beim Kauf eines Grundstücks und der Errichtung eines Wohnhauses: Welche Aussagen zur Einordnung in öffentliches bzw. privates Recht und in generelle bzw. individuelle Normen sind richtig?",
        options: [
          "Der Kaufvertrag über das Grundstück ist grundsätzlich Privatrecht und beruht auf individuellen Normen (Vertrag zwischen den Parteien).",
          "Die Baubewilligung der Behörde ist ein Akt des öffentlichen Rechts und stellt eine individuelle Norm (Bescheid) dar.",
          "Die Bauordnung des Landes ist eine generelle Norm des öffentlichen Rechts.",
          "Die Grundbuchseintragung ist ein privatrechtlicher Vertrag zwischen Eigentümer und Gericht."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Kaufvertrag = Privatrecht, Baubewilligung = individueller Hoheitsakt, Bauordnung = generelle Norm des öffentlichen Rechts. Die Grundbuchseintragung ist hoheitliche Tätigkeit des Gerichts, kein privatrechtlicher Vertrag."
      },
      {
        id: 132,
        tag: "ÖR",
        topic: "Recht, Moral, Religion, Ethik",
        text: "Wodurch unterscheidet sich staatliches Recht typischerweise von anderen Normensystemen wie Moral, Ethik oder Religion?",
        options: [
          "Rechtsnormen können vom Staat mit Zwangsmitteln (z.B. Geld- oder Freiheitsstrafe) durchgesetzt werden.",
          "Rechtsnormen werden in einem formalisierten Verfahren erlassen und kundgemacht (z.B. BGBl., RIS).",
          "Moralische Normen sind immer strafrechtlich sanktioniert.",
          "Religiöse Gebote gelten als staatliches Recht nur, wenn sie in staatliche Rechtsnormen übernommen werden."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Recht ist durch staatliche Durchsetzbarkeit und formalisierte Kundmachung gekennzeichnet. Moral und Religion wirken vor allem sozial bzw. innerkirchlich; sie werden nur dann zum staatlichen Recht, wenn der Gesetzgeber sie übernimmt."
      },
      {
        id: 133,
        tag: "ÖR",
        topic: "Rechtsrecherche",
        text: "Wo können Sie in Österreich typischerweise Rechtsvorschriften recherchieren?",
        options: [
          "Im Rechtsinformationssystem des Bundes (RIS).",
          "Im Bundesgesetzblatt (BGBl.).",
          "Im Firmenbuch.",
          "Auf der Website des Parlaments (z.B. über die Gesetzes- und Materialien-Datenbank)."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "RIS, BGBl. und die Parlaments-Website dienen der Veröffentlichung und Dokumentation von Rechtsvorschriften. Das Firmenbuch enthält Unternehmensdaten, aber keine systematische Sammlung von Gesetzen."
      },
      {
        id: 134,
        tag: "ÖR",
        topic: "Repräsentative Demokratie",
        text: "Welche Aussagen zur repräsentativen Demokratie in Österreich treffen zu?",
        options: [
          "Die Staatsbürger wählen Vertreter (Abgeordnete), die im Parlament Gesetze beschließen.",
          "Alle Bundesgesetze werden in Volksabstimmungen direkt von den Bürgern beschlossen.",
          "Auch auf Landes- und Gemeindeebene treffen gewählte Vertretungskörper (Landtag, Gemeinderat) Entscheidungen.",
          "Repräsentative Demokratie schließt Elemente direkter Demokratie (z.B. Volksbegehren, Volksabstimmungen) vollständig aus."
        ],
        correctIndices: [0, 2],
        explanationNote:
          "Kern ist die Wahl von Vertretern, die stellvertretend Entscheidungen treffen. Es gibt ergänzend direktdemokratische Instrumente, aber nicht für jedes Gesetz; daher sind Aussagen zu reiner Direktdemokratie oder völligem Ausschluss direkter Demokratie falsch."
      },
      {
        id: 135,
        tag: "ÖR",
        topic: "Verfassungsrecht im Alltag",
        text: "Welche Beispiele zeigen die Bedeutung des Verfassungsrechts für den Alltag (vereinfacht)?",
        options: [
          "Das Wahlrecht zu Nationalrat und Landtag beruht auf verfassungsrechtlichen Regelungen.",
          "Grundrechte sichern u.a. Meinungsfreiheit und Eigentumsschutz.",
          "Der Führerschein wird ausschließlich durch Verfassungsrecht geregelt.",
          "Die Organisation von Bundes- und Landesbehörden ist im Verfassungsrecht vorgezeichnet."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Wahlrecht, Grundrechte und Staatsorganisation sind typische Inhalte des Verfassungsrechts. Detailfragen wie der Führerschein sind einfachgesetzlich geregelt (z.B. Führerscheingesetz)."
      },
      {
        id: 136,
        tag: "ÖR",
        topic: "Fall Kranwagen – Öffentliches/Privatrecht",
        text: "Ein 33-Tonnen-Kranwagen kommt auf einer abschüssigen Straße ins Rollen und beschädigt ein Wohnhaus; der Lenker wird verletzt. Welche Aussagen zur Einordnung in öffentliches und privates Recht sind zutreffend (vereinfacht)?",
        options: [
          "Baurechtliche Vorschriften über Aufstellung und Sicherung des Krans und allfällige Verwaltungsstrafen gehören zum öffentlichen Recht.",
          "Schadenersatzansprüche der Hausbewohnerin gegen den Kranunternehmer gehören zum Privatrecht.",
          "Die Entscheidung der Verwaltungsbehörde über eine Verwaltungsstrafe ist Privatrecht.",
          "Die Beurteilung der richtigen Kranaufstellung ist ausschließlich öffentliches Recht und spielt im Zivilverfahren keine Rolle."
        ],
        correctIndices: [0, 1],
        explanationNote:
          "Verwaltungsrecht (Bau-, Arbeits- und Verkehrsvorschriften, Verwaltungsstrafen) ist öffentliches Recht; Schadenersatzansprüche sind zivilrechtlich. Zivilgerichte berücksichtigen bei der Verschuldensprüfung auch öffentlich-rechtliche Sicherheitsvorschriften."
      },
      {
        id: 137,
        tag: "ÖR",
        topic: "Fall Kranwagen – Zuständigkeiten",
        text: "Im Kranwagen-Fall: Welche Zuordnungen von Behörden und Gerichten sind realistisch (vereinfacht)?",
        options: [
          "Über Verwaltungsstrafen wegen Verstößen gegen Arbeitnehmerschutz- oder Straßenverkehrsvorschriften entscheidet eine Verwaltungsbehörde und ggf. ein Verwaltungsgericht.",
          "Über Schadenersatzansprüche der Hausbewohnerin gegen den Kranunternehmer entscheidet ein Zivilgericht (ordentliche Gerichtsbarkeit).",
          "Über eine allfällige fahrlässige Körperverletzung entscheidet ein Strafgericht (ordentliche Gerichtsbarkeit).",
          "Über alle Fragen (Verwaltungsstrafe, Schadenersatz, Strafbarkeit) entscheidet ausschließlich das Verwaltungsgericht."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Verwaltungsdelikte: Verwaltungsbehörde/Verwaltungsgericht; zivilrechtliche Schadenersatzklagen und strafrechtliche Verantwortung: ordentliche Gerichte. Eine Zuständigkeit nur des Verwaltungsgerichts für alles gibt es nicht."
      },
      {
        id: 138,
        tag: "EU",
        topic: "Nationale Verordnung vs. EU-Verordnung",
        text: "Welche Aussagen zum Unterschied zwischen nationalen Verordnungen und EU-Verordnungen sind richtig (vereinfacht)?",
        options: [
          "Nationale Verordnungen werden von Verwaltungsbehörden auf Grundlage eines Gesetzes erlassen.",
          "EU-Verordnungen werden von Organen der Europäischen Union erlassen und gelten in den Mitgliedstaaten grundsätzlich unmittelbar.",
          "Nationale Verordnungen gelten automatisch in allen EU-Mitgliedstaaten.",
          "EU-Verordnungen müssen in Österreich immer erst in ein Bundesgesetz umgewandelt werden, bevor sie anwendbar sind."
        ],
        correctIndices: [0, 1],
        explanationNote:
          "Nationale Verordnungen konkretisieren Gesetze; EU-Verordnungen sind unmittelbar anwendbares Unionsrecht. Sie müssen nicht in nationales Recht „umgewandelt“ werden und gelten nicht automatisch als nationale Verordnungen in anderen Staaten."
      },
      {
        id: 139,
        tag: "ÖR",
        topic: "Gewerbearten",
        text: "Welche Aussagen zu Arten von Gewerben nach der GewO treffen zu (stark vereinfacht)?",
        options: [
          "Freie Gewerbe sind Gewerbe, die ohne besonderen Befähigungsnachweis ausgeübt werden können, aber eine Gewerbeanmeldung erfordern.",
          "Reglementierte Gewerbe setzen in der Regel einen Befähigungsnachweis (z.B. Meisterprüfung) voraus.",
          "Freie Gewerbe sind von der GewO überhaupt nicht erfasst.",
          "Bestimmte Tätigkeiten sind ausdrücklich von der GewO ausgenommen und daher kein Gewerbe."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Freie und reglementierte Gewerbe sind beide von der GewO erfasst; daneben gibt es Tätigkeiten, die ausdrücklich ausgenommen sind. Die Unterscheidung knüpft vor allem an den Befähigungsnachweis an."
      },
      {
        id: 140,
        tag: "ÖR",
        topic: "Gewerbeberechtigung & gewerberechtlicher Geschäftsführer",
        text: "Welche Aussagen zu allgemeinen Voraussetzungen der Gewerbeausübung sind richtig (vereinfacht)?",
        options: [
          "Der Gewerbetreibende muss handlungsfähig und verlässlich sein; bestimmte Vorstrafen können ein Hindernis darstellen.",
          "Es dürfen keine Gewerbeausschlussgründe vorliegen.",
          "Bei juristischen Personen ist häufig ein gewerberechtlicher Geschäftsführer zu bestellen, der die fachliche Qualifikation erfüllt.",
          "Ein gewerberechtlicher Geschäftsführer haftet automatisch persönlich für sämtliche Schulden des Unternehmens."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Verlässlichkeit und das Fehlen von Ausschlussgründen sind Grundvoraussetzungen. Juristische Personen benötigen einen gewerberechtlichen Geschäftsführer mit Befähigungsnachweis. Die persönliche Haftung für alle Schulden ergibt sich daraus aber nicht automatisch."
      },
      {
        id: 141,
        tag: "ÖR",
        topic: "Betriebsanlagengenehmigung",
        text: "Wann ist typischerweise eine Betriebsanlagengenehmigung nach der GewO erforderlich (stark vereinfacht)?",
        options: [
          "Wenn von der Anlage Gefährdungen, Belästigungen oder Belastungen (z.B. Lärm, Emissionen, Verkehr) für Nachbarn oder Umwelt ausgehen können.",
          "Immer, sobald ein Gewerbetreibender mehr als einen Mitarbeiter beschäftigt.",
          "Wenn Maschinen eingesetzt oder Produktions- bzw. Lagerräume genutzt werden, die über eine bloße Büronutzung hinausgehen.",
          "Nur dann, wenn der Betrieb ausschließlich im Freien stattfindet."
        ],
        correctIndices: [0, 2],
        explanationNote:
          "Entscheidend ist das Gefährdungs- oder Belästigungspotenzial der Betriebsanlage, nicht bloß die Mitarbeiterzahl oder der Umstand, dass im Freien gearbeitet wird."
      },
      {
        id: 142,
        tag: "ÖR",
        topic: "Baumeistergewerbe",
        text: "Welche Aussagen zum Baumeistergewerbe sind richtig (vereinfacht)?",
        options: [
          "Baumeister dürfen im Rahmen ihrer Befugnis Bauwerke planen, berechnen und ausführen.",
          "Für das Baumeistergewerbe ist ein Befähigungsnachweis (z.B. Baumeisterprüfung) erforderlich.",
          "Baumeister unterliegen standesrechtlichen Pflichten (z.B. gewissenhafte Berufsausübung, Haftpflichtversicherung, Fortbildung).",
          "Das Baumeistergewerbe ist ein freies Gewerbe ohne besondere Voraussetzungen."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Das Baumeistergewerbe ist reglementiert, setzt eine besondere Qualifikation voraus und ist mit standesrechtlichen Pflichten verbunden."
      },
      {
        id: 143,
        tag: "ÖR",
        topic: "ZiviltechnikerInnen (ZTG)",
        text: "Welche Aussagen zu Ziviltechnikerinnen und Ziviltechnikern nach dem ZTG sind richtig (vereinfacht)?",
        options: [
          "Ziviltechniker sind selbständig tätige Sachverständige und Planer mit besonderer Qualifikation (z.B. Architekten, Ingenieurkonsulenten).",
          "Sie werden von staatlichen Organen bestellt/beeidigt und führen ein amtliches Ziviltechnikersiegel.",
          "Sie unterliegen eigenen Standesregeln (Unabhängigkeit, Objektivität, Verschwiegenheit).",
          "Ziviltechniker dürfen nur für den Staat arbeiten und keine privaten Auftraggeber haben."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Ziviltechniker sind freiberufliche Experten mit öffentlichem Vertrauen; sie werden vom Staat bestellt und unterliegen strengen Standesregeln. Sie arbeiten sowohl für öffentliche als auch für private Auftraggeber."
      },
      {
        id: 144,
        tag: "BO",
        topic: "Baumschutzrecht",
        text: "Welche Aussagen zum (kommunalen) Baumschutzrecht, etwa in Wien, sind zutreffend (vereinfacht)?",
        options: [
          "Es handelt sich um öffentliches Recht, das sich an Grundstückseigentümer und -nutzer richtet.",
          "Für das Fällen größerer Bäume ist in der Regel eine behördliche Bewilligung erforderlich.",
          "Oft sind Ersatzpflanzungen oder Ausgleichszahlungen vorgesehen, wenn ein Baum entfernt wird.",
          "Das Baumschutzgesetz regelt ausschließlich privatrechtliche Ansprüche zwischen Nachbarn."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Baumschutzvorschriften sind verwaltungsrechtliche Normen; sie verlangen oft eine Bewilligung und knüpfen daran Auflagen. Privatrechtliche Nachbarschaftsansprüche bleiben davon unberührt."
      },
      {
        id: 145,
        tag: "GB",
        topic: "Grundbuchsauszug",
        text: "Auf welche Weise können Sie in der Praxis zu einem aktuellen Grundbuchsauszug gelangen (vereinfacht)?",
        options: [
          "Durch Einsicht und Ausdruck beim zuständigen Bezirksgericht.",
          "Über das elektronische Grundbuch, z.B. über Notare, Rechtsanwälte oder Online-Portale.",
          "Automatisch durch Einsicht in das Firmenbuch.",
          "Über Notare und Rechtsanwälte, die Zugriff auf das elektronische Grundbuch haben."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Grundbuchsauszüge erhält man beim Gericht oder über das elektronische Grundbuch (meist über berufliche Nutzer wie Notare/Anwälte). Das Firmenbuch ist ein eigenes Register für Unternehmen."
      },
      {
        id: 146,
        tag: "GB",
        topic: "Firmenbuch",
        text: "Was trifft auf das Firmenbuch zu (vereinfacht)?",
        options: [
          "Es ist ein öffentliches Register über eingetragene Unternehmen (z.B. OG, KG, GmbH, AG).",
          "Es wird von den Firmenbuchgerichten (Landes- bzw. Handelsgerichten) geführt.",
          "Es enthält u.a. Firma, Sitz, Vertretungsbefugnisse und bestimmte Gesellschaftsverträge.",
          "Es ist ein Verzeichnis aller in Österreich geltenden Gesetze."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Das Firmenbuch dokumentiert wesentliche Daten über Unternehmen und wird von Gerichten geführt. Es ist kein Gesetzesverzeichnis."
      },
      {
        id: 147,
        tag: "PR",
        topic: "MRG – Anwendungsbereich",
        text: "Welche Aussagen zum Anwendungsbereich des Mietrechtsgesetzes (MRG) sind richtig (stark vereinfacht)?",
        options: [
          "Für viele Altbauwohnungen in Gründerzeithäusern gilt das MRG zur Gänze (Vollanwendung).",
          "Für Ein- und Zweifamilienhäuser gilt das MRG in der Regel nicht (Vollausnahme).",
          "Es gibt Konstellationen mit Teilanwendung des MRG, z.B. bei bestimmten Geschäftsräumen.",
          "Das MRG gilt für alle Mietverhältnisse über Wohnungen und Geschäftsräume ausnahmslos."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Das MRG kennt Vollanwendung, Teilanwendung und Vollausnahmen. Gerade Ein- und Zweifamilienhäuser sind oft ausgenommen; eine generelle Geltung für alle Mietverhältnisse besteht nicht."
      },
      {
        id: 148,
        tag: "PR",
        topic: "MRG – Mietzinsarten",
        text: "Welche Aussagen zu Mietzinsarten nach dem MRG sind zutreffend (vereinfacht)?",
        options: [
          "Der Richtwertmietzins basiert auf einem gesetzlich festgelegten Richtwert pro Quadratmeter.",
          "Der angemessene Mietzins orientiert sich u.a. an Lage und Beschaffenheit des Objekts.",
          "Der Kategoriemietzins knüpft an die Ausstattungskategorie der Wohnung (z.B. Kategorie A–D) an.",
          "Im Vollanwendungsbereich des MRG sind Mietzinse völlig frei vereinbar, ohne gesetzliche Grenzen."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Richtwert-, angemessener und Kategoriemietzins sind typische MRG-Konzepte. Gerade im Vollanwendungsbereich bestehen gesetzliche Mietzinsbeschränkungen."
      },
      {
        id: 149,
        tag: "PR",
        topic: "Preisangabe im Schaufenster",
        text: "Im Schaufenster eines Juweliers ist eine teure Uhr irrtümlich mit 99 € statt 990 € ausgezeichnet. Welche Aussagen treffen zu (vereinfacht)?",
        options: [
          "Die Preisauszeichnung im Schaufenster ist rechtlich meist nur eine Einladung an Kunden, ein Angebot zu legen (invitatio ad offerendum).",
          "Der Verkäufer kann einen offensichtlichen Preisirrtum grundsätzlich anfechten und muss nicht in jedem Fall um 99 € verkaufen.",
          "Falsche Preisangaben können zu verwaltungs- oder wettbewerbsrechtlichen Konsequenzen führen (z.B. unlautere Geschäftspraktiken).",
          "Sobald der Kunde die Uhr zur Kassa bringt, ist der Kaufvertrag jedenfalls zu 99 € endgültig geschlossen und nicht mehr angreifbar."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Die Schaufensterware ist in der Regel kein verbindliches Angebot. Ist der Irrtum evident, kann der Unternehmer anfechten; irreführende Preisangaben können aber öffentlich-rechtliche oder wettbewerbsrechtliche Folgen haben."
      },
      {
        id: 150,
        tag: "GB",
        topic: "Doppelverkauf einer Wohnung",
        text: "Müller verkauft seine Eigentumswohnung zuerst an Huber, später an Maier. Maier zahlt sofort, wird aber nicht eingetragen; Huber wird später im Grundbuch einverleibt. Welche Aussagen sind richtig (vereinfacht)?",
        options: [
          "Eigentümerin wird grundsätzlich die Person, die zuerst im Grundbuch einverleibt wird – hier Huber.",
          "Maier erwirbt ohne Einverleibung kein Eigentum, hat aber schuldrechtliche Ansprüche gegen Müller.",
          "Die Zahlung des Kaufpreises ersetzt die Grundbuchseintragung nicht.",
          "Eigentümer bleibt jedenfalls Müller, weil zwei Verträge geschlossen wurden."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Bei Liegenschaften gilt das Eintragungsprinzip: Eigentumserwerb setzt Einverleibung voraus. Wer nicht einverleibt ist, bleibt auf schuldrechtliche Ansprüche verwiesen."
      },
      {
        id: 151,
        tag: "PR",
        topic: "Eigentumsvorbehalt – Baukran",
        text: "Bauunternehmer Veit hat einen Baukran unter Eigentumsvorbehalt von Dagobert gekauft und den Kaufpreis noch nicht vollständig bezahlt. Er verkauft den Kran an Konkurrent Kurt, der vom Eigentumsvorbehalt nichts weiß. Welche Aussagen treffen zu (vereinfacht, Sonderfälle des gutgläubigen Erwerbs unbeachtet)?",
        options: [
          "Solange der Kaufpreis an Dagobert nicht vollständig bezahlt ist, bleibt Dagobert grundsätzlich Eigentümer.",
          "Veit kann als Nicht-Eigentümer grundsätzlich kein Eigentum an Kurt übertragen.",
          "Kurt erlangt in dieser Konstellation nur Besitz, aber kein Eigentum am Kran.",
          "Der Eigentumsvorbehalt wirkt nur im Innenverhältnis zwischen Veit und Dagobert und schützt nicht gegenüber Dritten."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Der Eigentumsvorbehalt sichert dem Verkäufer das Eigentum bis zur vollständigen Zahlung. Ohne Sondertatbestände des gutgläubigen Erwerbs erwirbt der Dritte vom Nicht-Eigentümer kein Eigentum."
      },
      {
        id: 152,
        tag: "PR",
        topic: "Besitz beim Diebstahl",
        text: "In der U-Bahn stiehlt eine Person einem Fahrgast die Geldbörse. Welche Aussagen zum Besitz sind richtig (vereinfacht)?",
        options: [
          "Der Dieb erlangt die tatsächliche Sachherrschaft und wird damit unmittelbarer Besitzer der Geldbörse.",
          "Der Besitz des Diebes ist fehlerhaft und unredlich.",
          "Rechtmäßiger Besitz setzt einen gültigen Rechtsgrund (Titel) voraus, der hier fehlt.",
          "Weil der Dieb die Geldbörse in der Hand hat, wird er automatisch Eigentümer."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Besitz ist zunächst nur tatsächliche Herrschaft. Der Dieb ist zwar Besitzer, aber fehlerhaft und unredlich; Eigentumserwerb tritt dadurch nicht ein."
      },
      {
        id: 153,
        tag: "GB",
        topic: "Wegerecht – Servitut vs. obligatorisches Recht",
        text: "A und B vereinbaren, dass A einen über B gehörenden Weg gegen jährliche Zahlung benutzen darf. Die Vereinbarung wird nicht im Grundbuch eingetragen. Später verkauft B an C, der A die Nutzung verbietet. Welche Aussagen sind richtig (vereinfacht)?",
        options: [
          "Ohne grundbücherlich eingetragene Dienstbarkeit ist C grundsätzlich nicht an die Vereinbarung zwischen A und B gebunden.",
          "A hatte nur ein obligatorisches Benützungsrecht gegen B, aber kein dingliches Recht gegenüber jedermann.",
          "A könnte sich absichern, indem er mit B eine Dienstbarkeit vereinbart und diese im Grundbuch einverleiben lässt.",
          "C muss den Weg jedenfalls weiter dulden, weil alle privatrechtlichen Vereinbarungen automatisch auch gegenüber Rechtsnachfolgern wirken."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Ohne Eintragung besteht nur eine schuldrechtliche Bindung zwischen A und B. Ein Rechtsnachfolger ist daran grundsätzlich nicht gebunden; ein dingliches Wegerecht erfordert die Eintragung im Grundbuch."
      },
      {
        id: 154,
        tag: "PR",
        topic: "Lieferverzug – Küchenfall",
        text: "Lieferant Leo hätte Gerda am 1.11. eine Küche liefern sollen. Am 15.11. ist noch nicht geliefert. Welche Aussagen sind richtig (vereinfacht)?",
        options: [
          "Handelt es sich um ein bloßes Termingeschäft, muss Gerda Leo zunächst eine angemessene Nachfrist setzen und kann bei weiterer Nichtlieferung zurücktreten.",
          "Ist ausdrücklich ein absolutes Fixgeschäft vereinbart, kann der Vertrag bei Nichterfüllung zum Termin automatisch zerfallen.",
          "Ohne jede Vereinbarung über Termine kann Gerda nie vom Vertrag zurücktreten.",
          "Teilt Leo am 8.11. mit, dass der Hersteller insolvent ist und frühestens in 6 Monaten liefern kann, kann Gerda in der Regel auch ohne zusätzliche Nachfrist zurücktreten."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Beim Termingeschäft braucht es grundsätzlich eine Nachfrist, beim absoluten Fixgeschäft nicht. Wenn klar ist, dass innerhalb angemessener Zeit nicht geliefert werden kann, ist ein sofortiger Rücktritt meist zulässig."
      },
      {
        id: 155,
        tag: "HAFT",
        topic: "Bauunternehmer Bauschön – Gewährleistung & Schadenersatz",
        text: "Arbeiter der Bauschön GmbH beschädigen beim Ausbau eines Mansardenzimmers Parkett und Wände im Vorraum; zudem ist das Dachfenster mangelhaft eingebaut und verursacht Feuchtigkeitsschäden. Welche Aussagen sind richtig (vereinfacht)?",
        options: [
          "Die mangelhafte Ausführung des Dachfensters begründet Gewährleistungsansprüche (Verbesserung, Austausch, Preisminderung, Wandlung).",
          "Folgeschäden durch das undichte Dachfenster (z.B. beschädigter Parkett im Zimmer) können zusätzlich als Schadenersatz geltend gemacht werden.",
          "Die beim Arbeiten unmittelbar beschädigten Bauteile können ausschließlich über Produkthaftung ersetzt werden.",
          "Die Bauschön GmbH haftet nach § 1313a ABGB für das Verschulden ihrer Arbeiter als Erfüllungsgehilfen."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Werkmängel lösen Gewährleistung aus; darüber hinaus können Mangelfolgeschäden bei Verschulden als Schadenersatz verlangt werden. Der Unternehmer haftet für seine Leute wie für eigenes Verschulden; Produkthaftung ist hier nicht der typische Ansatz."
      },
      {
        id: 156,
        tag: "HAFT",
        topic: "Wintergarten-Fall – Ansprüche",
        text: "A lässt von B einen Wintergarten errichten. Ein Sturm reißt das Dach ab; ein Sachverständiger stellt eine nicht fachgerechte Befestigung fest. Pflanzen gehen kaputt, und A trägt Gutachterkosten. Welche Ansprüche gegen B kommen in Betracht (vereinfacht)?",
        options: [
          "Gewährleistung wegen mangelhafter Werkleistung (unzureichende Dachbefestigung).",
          "Schadenersatz für Folgeschäden wie zerstörte Pflanzen, sofern B oder seine Leute den Mangel verschuldet haben.",
          "Ersatz der notwendigen Sachverständigenkosten als Schadenersatzposition.",
          "Produkthaftung, obwohl nur eine Dienstleistung ohne Produkt vorliegt."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Der mangelhafte Wintergarten begründet Gewährleistung; verschuldete Folgeschäden und notwendige Gutachterkosten können als Schadenersatz verlangt werden. Produkthaftung knüpft an fehlerhafte Produkte an, nicht an bloße Werkleistungen."
      },
      {
        id: 157,
        tag: "HAFT",
        topic: "Gewährleistung, Schadenersatz, Produkthaftung – Vergleich",
        text: "Welche Aussagen zum Verhältnis von Gewährleistung, Schadenersatz und Produkthaftung sind richtig (vereinfacht)?",
        options: [
          "Gewährleistung ist verschuldensunabhängig; es genügt, dass der Mangel bei Übergabe vorhanden war.",
          "Schadenersatz setzt grundsätzlich ein Verschulden des Schädigers voraus (abgesehen von besonderen Gefährdungstatbeständen).",
          "Produkthaftung erfasst typischerweise Personen- und bestimmte Sachschäden und ist ebenfalls verschuldensunabhängig.",
          "Wer Gewährleistung geltend macht, kann nie zusätzlich Schadenersatz verlangen."
        ],
        correctIndices: [0, 1, 2],
        explanationNote:
          "Gewährleistung knüpft an den mangelhaften Zeitpunkt der Vertragserfüllung an; Schadenersatz verlangt grundsätzlich Verschulden; Produkthaftung ist eine spezielle verschuldensunabhängige Haftung für fehlerhafte Produkte. Gewährleistung und Schadenersatz können nebeneinander bestehen."
      },
      {
        id: 158,
        tag: "ÖR",
        topic: "Gemeinden – Selbstverwaltung",
        text: "Welche Aussagen zur Selbstverwaltung der Gemeinden sind richtig (vereinfacht)?",
        options: [
          "Gemeinden sind Gebietskörperschaften mit einem eigenen Wirkungsbereich.",
          "Gemeinden können in ihrem eigenen Wirkungsbereich Verordnungen erlassen (z.B. Flächenwidmungsplan, Verordnungen über örtliche Angelegenheiten).",
          "Gemeinden sind bloße Privatrechtsvereine ohne hoheitliche Befugnisse.",
          "Im übertragenen Wirkungsbereich vollziehen Gemeinden Aufgaben des Bundes oder Landes."
        ],
        correctIndices: [0, 1, 3],
        explanationNote:
          "Gemeinden haben einen eigenen (autonomen) Wirkungsbereich, in dem sie selbständig handeln, und einen übertragenen Wirkungsbereich, in dem sie Aufgaben von Bund oder Land vollziehen. Sie sind öffentliche Körperschaften, keine bloßen Privatrechtsvereine."
      }
    ];

    // Gesamte Fragenbasis: 130 + 28 = 158 Fragen
    const QUESTIONS = [...BASE_QUESTIONS, ...EXTRA_QUESTIONS];

    // ===============================
    // State
    // ===============================
    let questionOrder = [];
    let optionOrder = [];
    let currentOrderIndex = 0;
    let userAnswers = [];
    let questionChecked = [];
    let quizFinished = false;

    document.addEventListener("DOMContentLoaded", () => {
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const checkBtn = document.getElementById("check-btn");
      const evalBtn = document.getElementById("eval-btn");
      const restartBtn = document.getElementById("restart-btn");
      const reshuffleBtn = document.getElementById("reshuffle-btn");
      const closeSolutionBtn = document.getElementById("close-solution-btn");

      resetQuiz(true);

      prevBtn.addEventListener("click", showPrevQuestion);
      nextBtn.addEventListener("click", showNextQuestion);
      checkBtn.addEventListener("click", checkCurrentQuestion);
      evalBtn.addEventListener("click", () => {
        evaluateQuiz();
        openSolutionOverlay();
      });
      restartBtn.addEventListener("click", () => resetQuiz(false));
      reshuffleBtn.addEventListener("click", () => resetQuiz(true));
      closeSolutionBtn.addEventListener("click", () => {
        document.getElementById("solution-overlay").classList.add("hidden");
      });

      document.addEventListener("keydown", (e) => {
        if (!QUESTIONS.length) return;
        if (e.key === "ArrowRight") {
          showNextQuestion();
        } else if (e.key === "ArrowLeft") {
          showPrevQuestion();
        } else if (e.key === "Enter") {
          e.preventDefault();
          checkCurrentQuestion();
        }
      });
    });

    function resetQuiz(reshuffleQuestions) {
      if (!QUESTIONS.length) return;
      const total = QUESTIONS.length;

      if (reshuffleQuestions || !questionOrder.length) {
        questionOrder = QUESTIONS.map((_, idx) => idx);
        shuffle(questionOrder);
      }

      optionOrder = QUESTIONS.map((q) => {
        const arr = q.options.map((_, idx) => idx);
        shuffle(arr);
        return arr;
      });

      currentOrderIndex = 0;
      userAnswers = QUESTIONS.map(() => []);
      questionChecked = QUESTIONS.map(() => false);
      quizFinished = false;

      const scoreBanner = document.getElementById("score-banner");
      if (scoreBanner) {
        scoreBanner.classList.add("hidden");
        scoreBanner.classList.remove("positive", "negative");
      }
      document.getElementById("solution-overlay").classList.add("hidden");

      renderCurrentQuestion();
      updateProgressInfo();
      renderQuestionNav();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function renderQuestionNav() {
      const nav = document.getElementById("question-nav");
      if (!nav || !questionOrder.length) return;
      const total = questionOrder.length;
      let html = "";
      for (let i = 0; i < total; i++) {
        const qIndex = questionOrder[i];
        const answered = userAnswers[qIndex] && userAnswers[qIndex].length > 0;
        const classes = [
          "qnav-item",
          i === currentOrderIndex ? "current" : "",
          answered ? "answered" : ""
        ]
          .filter(Boolean)
          .join(" ");
        html += `<button type="button" class="${classes}" data-order-index="${i}">${i + 1}</button>`;
      }
      nav.innerHTML = html;

      nav.querySelectorAll("button[data-order-index]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const idx = parseInt(btn.getAttribute("data-order-index"), 10);
          if (!isNaN(idx)) {
            currentOrderIndex = idx;
            renderCurrentQuestion();
          }
        });
      });
    }

    function renderCurrentQuestion() {
      if (!QUESTIONS.length) return;
      const questionContainer = document.getElementById("question-container");
      const total = QUESTIONS.length;
      const qIndex = questionOrder[currentOrderIndex];
      const q = QUESTIONS[qIndex];
      const order = optionOrder[qIndex];
      const selected = userAnswers[qIndex] || [];

      const optionsHtml = order
        .map((origIdx, dispIdx) => {
          const text = q.options[origIdx];
          const isChecked = selected.includes(origIdx) ? "checked" : "";
          const letter = String.fromCharCode(97 + dispIdx);
          return `
            <label class="option">
              <input type="checkbox" data-orig-index="${origIdx}" ${isChecked}>
              <span class="option-letter">${letter})</span>
              <span class="option-text">${text}</span>
            </label>
          `;
        })
        .join("");

      questionContainer.innerHTML = `
        <div class="question-card" id="question-card">
          <div class="question-header">
            <div class="question-number">Frage ${currentOrderIndex + 1} von ${total}</div>
            <div class="question-topic">${q.topic || ""}</div>
          </div>
          <div class="question-text">${q.text}</div>
          <div class="question-note">
            Mehrfachauswahl möglich – mindestens eine Antwort ist richtig, aber nie alle. Falsche Kreuze ziehen Punkte ab.
          </div>
          <div class="options">
            ${optionsHtml}
          </div>
          <div class="explanation hidden" id="explanation"></div>
          <div class="message" id="message"></div>
        </div>
      ";

      attachOptionChangeHandlers(qIndex);

      if (questionChecked[qIndex]) {
        const card = document.getElementById("question-card");
        applyEvaluationStyles(card, q, selected, qIndex);
        const explEl = document.getElementById("explanation");
        if (explEl) {
          explEl.innerHTML =
            "<strong>Begründung:</strong><br>" + getExplanation(q);
          explEl.classList.remove("hidden");
        }
        const msgEl = document.getElementById("message");
        if (msgEl) {
          const qScore = computeQuestionScorePercent(q, selected);
          const rounded = Math.round(qScore);
          msgEl.textContent = buildQuestionMessage(rounded);
        }
      }

      updateProgressInfo();
      renderQuestionNav();
    }

    function attachOptionChangeHandlers(qIndex) {
      const card = document.getElementById("question-card");
      if (!card) return;
      const checkboxes = card.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((cb) => {
        cb.addEventListener("change", () => {
          const origIdx = parseInt(cb.getAttribute("data-orig-index"), 10);
          if (isNaN(origIdx)) return;
          let arr = userAnswers[qIndex] || [];
          if (cb.checked) {
            if (!arr.includes(origIdx)) arr.push(origIdx);
          } else {
            arr = arr.filter((i) => i !== origIdx);
          }
          userAnswers[qIndex] = arr;
          questionChecked[qIndex] = false;
          const explEl = document.getElementById("explanation");
          if (explEl) explEl.classList.add("hidden");
          const msgEl = document.getElementById("message");
          if (msgEl) msgEl.textContent = "";
          renderQuestionNav();
          updateProgressInfo();
        });
      });
    }

    function showPrevQuestion() {
      if (!QUESTIONS.length) return;
      if (currentOrderIndex > 0) {
        currentOrderIndex -= 1;
        renderCurrentQuestion();
      }
    }

    function showNextQuestion() {
      if (!QUESTIONS.length) return;
      if (currentOrderIndex < questionOrder.length - 1) {
        currentOrderIndex += 1;
        renderCurrentQuestion();
      }
    }

    function checkCurrentQuestion() {
      if (!QUESTIONS.length) return;
      const qIndex = questionOrder[currentOrderIndex];
      const q = QUESTIONS[qIndex];
      const card = document.getElementById("question-card");
      if (!card) return;

      const checkboxes = card.querySelectorAll('input[type="checkbox"]');
      const selectedOriginalIndices = [];
      checkboxes.forEach((cb) => {
        if (cb.checked) {
          const orig = parseInt(cb.getAttribute("data-orig-index"), 10);
          if (!isNaN(orig)) selectedOriginalIndices.push(orig);
        }
      });

      userAnswers[qIndex] = selectedOriginalIndices;
      questionChecked[qIndex] = true;

      applyEvaluationStyles(card, q, selectedOriginalIndices, qIndex);

      const qScore = computeQuestionScorePercent(q, selectedOriginalIndices);
      const rounded = Math.round(qScore);
      const msgEl = document.getElementById("message");
      if (msgEl) {
        msgEl.textContent = buildQuestionMessage(rounded);
      }

      const explEl = document.getElementById("explanation");
      if (explEl) {
        explEl.innerHTML =
          "<strong>Begründung:</strong><br>" + getExplanation(q);
        explEl.classList.remove("hidden");
      }

      updateProgressInfo();
      renderQuestionNav();
    }

    function buildQuestionMessage(percent) {
      if (percent === 100) return "Frage-Punkte: 100 % – voll korrekt.";
      if (percent >= 60)
        return `Frage-Punkte: ${percent} % – positiv, aber nicht alles richtig.`;
      if (percent > 0)
        return `Frage-Punkte: ${percent} % – teilweise richtig, aber noch negativ (< 60 %).`;
      return "Frage-Punkte: 0 % – keine Punkte für diese Frage.";
    }

    function applyEvaluationStyles(card, question, selectedOriginalIndices, qIndex) {
      const optionsEls = card.querySelectorAll(".option");
      const selectedSet = new Set(selectedOriginalIndices || []);
      const correctSet = new Set(question.correctIndices);
      const order = optionOrder[qIndex];

      optionsEls.forEach((optEl, dispIdx) => {
        optEl.classList.remove("correct", "incorrect", "unselected-correct");
        const origIdx = order[dispIdx];
        const isSelected = selectedSet.has(origIdx);
        const isCorrect = correctSet.has(origIdx);

        if (isCorrect && isSelected) {
          optEl.classList.add("correct");
        } else if (!isCorrect && isSelected) {
          optEl.classList.add("incorrect");
        } else if (isCorrect && !isSelected) {
          optEl.classList.add("unselected-correct");
        }
      });
    }

    // Neue Bewertungslogik:
    // Jede richtige Antwort = + (100 / Anzahl richtiger Antworten)
    // Jede falsche Antwort = - (100 / Anzahl richtiger Antworten)
    // Minimum 0 %, Maximum 100 %
    function computeQuestionScorePercent(question, selectedOriginalIndices) {
      const correctSet = new Set(question.correctIndices);
      const K = correctSet.size;
      if (K === 0) return 0;

      const selectedSet = new Set(selectedOriginalIndices || []);
      let rSel = 0;
      let wSel = 0;

      selectedSet.forEach((idx) => {
        if (correctSet.has(idx)) {
          rSel++;
        } else {
          wSel++;
        }
      });

      const step = 100 / K;
      let score = (rSel - wSel) * step;
      if (score < 0) score = 0;
      if (score > 100) score = 100;
      return score;
    }

    function updateProgressInfo() {
      const total = QUESTIONS.length;
      const infoCurrent = document.getElementById("info-current-question");
      const infoTotal = document.getElementById("info-total-questions");
      const infoAnswered = document.getElementById("info-answered");

      if (infoCurrent) {
        infoCurrent.textContent = total ? String(currentOrderIndex + 1) : "–";
      }
      if (infoTotal) {
        infoTotal.textContent = total ? String(total) : "–";
      }
      if (infoAnswered) {
        const answeredCount = QUESTIONS.reduce((acc, _, qIdx) => {
          const arr = userAnswers[qIdx];
          return acc + (arr && arr.length ? 1 : 0);
        }, 0);
        infoAnswered.textContent = total ? String(answeredCount) : "–";
      }
    }

    function evaluateQuiz() {
      if (!QUESTIONS.length) return;
      const total = QUESTIONS.length;
      let sumScore = 0;

      QUESTIONS.forEach((q, idx) => {
        sumScore += computeQuestionScorePercent(q, userAnswers[idx] || []);
      });

      const overallPercent = total ? sumScore / total : 0;
      const roundedOverall = Math.round(overallPercent);

      const scoreBanner = document.getElementById("score-banner");
      const scorePercent = document.getElementById("score-percent");
      const scoreGrade = document.getElementById("score-grade");
      const scoreDetails = document.getElementById("score-details");

      if (scorePercent) scorePercent.textContent = `${roundedOverall} %`;
      if (scoreGrade) scoreGrade.textContent = getGradeText(roundedOverall);
      if (scoreDetails) {
        scoreDetails.textContent = `Durchschnitt über alle ${total} Fragen: ${roundedOverall} %.`;
      }

      if (scoreBanner) {
        scoreBanner.classList.remove("hidden", "positive", "negative");
        if (roundedOverall >= 60) {
          scoreBanner.classList.add("positive");
        } else {
          scoreBanner.classList.add("negative");
        }
      }

      quizFinished = true;
    }

    function getGradeText(percent) {
      if (percent >= 90) return "Note 1 – Sehr gut (positiv)";
      if (percent >= 80) return "Note 2 – Gut (positiv)";
      if (percent >= 70) return "Note 3 – Befriedigend (positiv)";
      if (percent >= 60) return "Note 4 – Genügend (positiv)";
      return "Note 5 – Nicht genügend (negativ)";
    }

    function openSolutionOverlay() {
      if (!QUESTIONS.length) return;

      const total = QUESTIONS.length;
      let sumScore = 0;
      const perQuestionScores = QUESTIONS.map((q, idx) => {
        const s = computeQuestionScorePercent(q, userAnswers[idx] || []);
        sumScore += s;
        return s;
      });

      const overallPercent = total ? sumScore / total : 0;
      const roundedOverall = Math.round(overallPercent);

      const summaryEl = document.getElementById("solution-summary");
      summaryEl.innerHTML = `
        Gesamtpunkte: <b>${roundedOverall} %</b> – ${getGradeText(
          roundedOverall
        )}<br>
        Fragenzahl: <b>${total}</b>. Mindestens 60 % = positiv.
      `;

      const listEl = document.getElementById("solution-list");
      listEl.innerHTML = "";

      questionOrder.forEach((qIndex, idxInOrder) => {
        const q = QUESTIONS[qIndex];
        const score = perQuestionScores[qIndex] || 0;
        const rounded = Math.round(score);
        const positive = rounded >= 60;
        const order = optionOrder[qIndex];
        const correctSet = new Set(q.correctIndices);
        const selectedSet = new Set(userAnswers[qIndex] || []);

        let optionsHtml = "";
        order.forEach((origIdx, dispIdx) => {
          const text = q.options[origIdx];
          const isCorrect = correctSet.has(origIdx);
          const wasSelected = selectedSet.has(origIdx);

          let mark = "";
          let cssClass = "opt-neutral";

          if (isCorrect && wasSelected) {
            mark = "✓";
            cssClass = "opt-correct";
          } else if (isCorrect && !wasSelected) {
            mark = "✓";
            cssClass = "opt-neutral";
          } else if (!isCorrect && wasSelected) {
            mark = "✗";
            cssClass = "opt-wrong-selected";
          } else {
            mark = "•";
          }

          const letter = String.fromCharCode(97 + dispIdx);
          optionsHtml += `
            <div class="solution-opt ${cssClass}">
              <div class="solution-opt-mark">${mark}</div>
              <div><b>${letter})</b> ${text}</div>
            </div>
          `;
        });

        const scoreClass = positive ? "positive" : "negative";
        const explText = getExplanation(q);

        const blockHtml = `
          <div class="solution-question">
            <div class="solution-q-header">
              <div class="solution-q-title">Frage ${idxInOrder + 1} – ${
          q.id
        }</div>
              <div class="solution-q-topic">${q.topic || ""}</div>
            </div>
            <div>${q.text}</div>
            <div class="solution-q-score ${scoreClass}">
              Punkte: ${rounded} %
            </div>
            <div class="solution-options">
              ${optionsHtml}
            </div>
            <div class="solution-expl">${explText}</div>
          </div>
        `;
        listEl.insertAdjacentHTML("beforeend", blockHtml);
      });

      document.getElementById("solution-overlay").classList.remove("hidden");
    }

    function getExplanation(q) {
      const correctTexts = q.correctIndices.map((idx) => q.options[idx]);
      const base =
        "Richtig " +
        (correctTexts.length === 1 ? "ist" : "sind") +
        " hier: " +
        correctTexts.join(" · ") +
        ".";
      let extra = "";

      if (q.explanationNote && q.explanationNote.trim() !== "") {
        extra = " " + q.explanationNote.trim();
      } else {
        extra = getTagSpecificExplanation(q.tag);
      }

      return base + extra;
    }

    function getTagSpecificExplanation(tag) {
      switch (tag) {
        case "ÖR":
          return " Die richtigen Antworten entsprechen den Grundsätzen des österreichischen öffentlichen Rechts (Verfassung, Verwaltung, Zuständigkeiten). Die übrigen Aussagen sind so im Gesetz nicht vorgesehen.";
        case "EU":
          return " Die richtigen Antworten geben die Rolle und Wirkung der Institutionen bzw. Rechtsakte der Europäischen Union korrekt wieder; die anderen Optionen stimmen mit dem Europarecht nicht überein.";
        case "GB":
          return " Die richtigen Antworten treffen Aussagen über Aufbau und Wirkungen des Grundbuchs (A-, B-, C-Blatt, Einverleibung, Rang). Die falschen Antworten ordnen Begriffe dem falschen Blatt oder einer unzutreffenden Rechtsfolge zu.";
        case "PR":
          return " Die richtigen Antworten folgen den Grundsätzen des österreichischen Privatrechts (ABGB, Verträge, Sachenrecht). Die falschen Antworten widersprechen diesen Regeln oder lassen wichtige Voraussetzungen weg.";
        case "HAFT":
          return " Hier geht es um die Voraussetzungen und Rechtsfolgen von Schadenersatzansprüchen (Schaden, Rechtswidrigkeit, Kausalität, Verschulden, Mitverschulden etc.). Die übrigen Optionen blenden einen oder mehrere dieser Punkte aus.";
        case "PHG":
          return " Die richtigen Antworten entsprechen den Grundsätzen des Produkthaftungsgesetzes (PHG: verschuldensunabhängige Haftung, Fristen, erfasste Schäden). Die falschen Antworten weichen von diesen Vorgaben ab.";
        case "AGB":
          return " Die richtigen Antworten beschreiben Einbeziehung und Inhaltskontrolle von Allgemeinen Geschäftsbedingungen (AGB), insbesondere Transparenz und Verbot gröblich benachteiligender Klauseln. Die falschen Optionen stimmen damit nicht überein.";
        case "KSG":
          return " Das Konsumentenschutzgesetz (KSchG) enthält besondere Schutzvorschriften zugunsten von Konsument:innen, etwa Widerrufsrechte, Informationspflichten und Grenzen für Garantiezusagen. Die falschen Antworten verkennen diese Schutzrichtung.";
        case "KOST":
          return " Die richtigen Antworten geben die Rechtslage zu Kostenvoranschlag, Fixpreis und Mehrkosten im Werkvertragsrecht wieder. Die übrigen Optionen überzeichnen oder verkennen die Bindungswirkung.";
        case "ARB":
          return " Hier geht es um Arbeitsunfälle, den Versicherungsschutz (z. B. AUVA) und die Pflichten des Arbeitgebers. Die falschen Antworten spiegeln nicht das System der gesetzlichen Unfallversicherung wider.";
        case "VStG":
          return " Das Verwaltungsstrafgesetz (VStG) regelt Verwaltungsübertretungen, Verantwortlichkeit von Personen und Organisationen sowie mögliche Sanktionen. Die falschen Antworten passen nicht zu diesem System.";
        case "VfGH":
          return " Die richtigen Antworten beschreiben Aufgaben und Klagearten beim Verfassungsgerichtshof (z. B. Normenkontrolle, Verfassungsbeschwerde). Die falschen betreffen andere Gerichtsbarkeiten.";
        case "VwGH":
          return " Der Verwaltungsgerichtshof (VwGH) überprüft Entscheidungen der Verwaltungsgerichte auf Rechtsrichtigkeit. Andere Antworten ordnen ihm Aufgaben zu, die anderen Gerichten zukommen.";
        case "OGH":
          return " Der Oberste Gerichtshof (OGH) ist Höchstgericht in Zivil- und Strafsachen und sorgt für einheitliche Rechtsanwendung. Die falschen Antworten betreffen andere Gerichte oder Funktionen.";
        case "BO":
          return " Die richtigen Antworten betreffen die Bauordnung: Zuständigkeiten der Baupolizei, notwendige Unterlagen und Fristen. Falsche Antworten beschreiben Inhalte, die dort so nicht geregelt sind.";
        default:
          return " Die übrigen Antwortmöglichkeiten sind mit der maßgeblichen gesetzlichen Regelung nicht vereinbar.";
      }
    }
  </script>
</body>
</html>
